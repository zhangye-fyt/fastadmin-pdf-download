!function(d){"use strict";var r=d("body"),c=d(".page-sidebar"),m=window.minimog.Helpers,u="collapsed",g="sidebar-widgets-collapsible";function t(){"function"==typeof d.fn.selectWoo&&d(".minimog-wp-widget-product-layered-nav-dropdown").each(function(){var e=d(this);e.selectWoo({placeholder:e.data("placeholder"),minimumResultsForSearch:5,width:"100%",allowClear:!e.attr("multiple"),language:{noResults:function(){return $minimog.i18l.noMatchesFound}}}).on("select2:unselecting",function(e){d(this).on("select2:opening.cancelOpen",function(e){e.preventDefault(),d(this).off("select2:opening.cancelOpen")})})})}function s(e,t,n,i){var o=d("#archive-layout-switcher");o.length<=0||0<(o=o.find(".switcher-item[data-columns="+i+"]")).length&&(o.siblings().removeClass("selected"),o.addClass("selected"))}function f(e,t={}){var s=d.extend(!0,{},{loadMore:0,scrollTop:0},t),n=(e=decodeURIComponent(e),s.loadMore||history.pushState({},null,e),d(".shop-load-more-button"));d(document.body).trigger("minimog_getting_product"),d.ajax({url:e,type:"GET",dataType:"html",success:function(e){for(var t=d(e),e=d("#minimog-main-post"),n=(s.loadMore||e.children(".minimog-grid").children(".grid-item").remove(),t.find("#minimog-main-post .grid-item")),i=(e.MinimogGridLayout("update",n),[".woocommerce-result-count",".woocommerce-pagination",".form-product-price-filter","#active-filters-bar"]),o=(d(".minimog-wp-widget-filter").each(function(){var e=d(this).attr("id");i.push("#"+e)}),i.length),a=0;a<o;a++){var l=i[a],r=d(l);0<r.length&&(r.empty(),0<(l=t.find(l)).length)&&r.html(l.html())}d(document.body).trigger("minimog_get_product_fragments_loaded",[t]),s.scrollTop&&(n=e.offset().top,n-=198,n=Math.max(0,n),d("html, body").animate({scrollTop:n},300)),c.each(function(){var e=d(this);e.hasClass(g)&&e.find(".widget:not(."+u+")").find(".widget-content").stop().slideDown(250)}),d.fn.perfectScrollbar&&!m.isHandheld()&&c.find(".widget-scrollable").each(function(){d(this).find(".widget-content-inner").perfectScrollbar("update")})},beforeSend:function(){s.loadMore?m.setElementHandling(n):m.setBodyHandling()},complete:function(){s.loadMore?m.unsetElementHandling(n):m.setBodyCompleted()}})}d(document).ready(function(){var e,n,i,o,a,l;e=d("#archive-layout-switcher"),n=d(".minimog-main-post"),i="selected",e.on("click",".switcher-item",function(e){e.preventDefault();e=d(this);if(!e.hasClass(i)){e.siblings().removeClass(i),e.addClass(i);var e=e.data("layout"),t={};switch(n.addClass("layout-switching"),e){case"grid-one":t.columns=1,t.disableColumnChange=!0,n.addClass("style-list");break;case"grid-two":t.columns=2,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-three":t.columns=3,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-four":t.columns=4,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-five":t.columns=5,t.disableColumnChange=!1,n.removeClass("style-list")}n.MinimogGridLayout("updateLayout",t),n.on("MinimogGridLayoutResized",function(){n.removeClass("layout-switching")})}}),c.length<=0||(c.find(".widget").each(function(){var e=d(this);if(e.hasClass("widget_block"))return!0;e.children().not(".widget-title, .widgettitle, .widget-instance, .widget-content").wrapAll('<div class="widget-content"><div class="widget-content-inner"></div></div>'),e.hasClass("widget-scrollable")&&d.fn.perfectScrollbar&&!m.isHandheld()&&e.find(".widget-content-inner").perfectScrollbar()}),c.each(function(){var e=d(this);e.hasClass(g)&&e.on("click",".widget-title, .widgettitle",function(e){var t=d(this).closest(".widget");t.hasClass(u)?(t.removeClass(u),t.find(".widget-content").stop().slideDown(250)):(t.addClass(u),t.find(".widget-content").stop().slideUp(250))})})),"infinite"===(l=d(".woocommerce-pagination")).data("type")&&(o=0,(a=d(window)).on("scroll",function(){var e,t=d(this).scrollTop();o<t&&(e=a.height(),e=parseInt(.9*e),l.offset().top+l.outerHeight(!0)-e<=t)&&((e=l.find(".shop-load-more-button")).hasClass("updating-icon")||e.trigger("click")),o=t})),t(),d(document.body).on("MinimogGridLayoutColumnsChange",s),d(document.body).on("click",".minimog-wp-widget-filter .filter-link",function(e){e.preventDefault();var e=d(this),t=e.parent("li"),n=e.closest("ul"),i=e.attr("href");if(n.hasClass("single-choice")){if(t.hasClass("chosen"))return;t.addClass("chosen").siblings().removeClass("chosen")}else e.parent("li").toggleClass("chosen");n=d(this).closest(".page-sidebar");0<n.length&&(r.removeClass("off-sidebar-opened"),n.removeClass("off-sidebar-active"),m.unsetBodyOverflow()),f(i)}),d(document.body).on("click",".js-product-filter-link",function(e){e.preventDefault();e=d(this);e.hasClass("disabled")||f(e.attr("href"))}),d(document.body).on("change",".minimog-wp-widget-product-layered-nav-dropdown",function(){d(this).closest("form").trigger("submit")}),d(document.body).on("submit",".minimog-wp-widget-product-layered-nav-form",function(){var e=d(this),t=e.find(".filter-name"),n=e.find(".filter-query-type"),i=t.val(),e=e.attr("action"),e=m.addUrlParam(e,t.attr("name"),i);return f(e=0<n.length?""===i?m.removeUrlParam(e,n.attr("name")):m.addUrlParam(e,n.attr("name"),n.val()):e),!1}),d(document.body).on("submit",".form-product-price-filter",function(){var e=d(this),t=e.find("#min_price").val(),n=e.find("#max_price").val(),e=e.attr("action"),e=m.addUrlParam(e,"min_price",t);return f(m.addUrlParam(e,"max_price",n)),!1}),d(document.body).on("click",".woocommerce-pagination a.page-numbers",function(e){e.preventDefault(),f(d(this).attr("href"),{scrollTop:1})}),d(document.body).on("click",".shop-load-more-button",function(e){e.preventDefault(),f(d(this).attr("data-url"),{loadMore:1})}),d(document.body).on("change",".js-product-ordering select.orderby",function(){f(m.addUrlParam(window.location.href,"orderby",d(this).val()))})}),d(document.body).on("minimog_get_product_fragments_loaded",function(){t(),d(document.body).trigger("init_price_filter")})}(jQuery);