{"version":3,"sources":["common-archive.js"],"names":["$","$body","$pageSidebars","Helpers","window","minimog","COLLAPSED_CLASS","COLLAPSIBLE_CLASS","initSelect2LayeredNavDropdown","fn","selectWoo","each","$dropdown","this","placeholder","data","minimumResultsForSearch","width","allowClear","attr","language","noResults","$minimog","i18l","noMatchesFound","on","evt","preventDefault","off","updateLayoutSwitcherState","$grid","oldColumns","newColumns","$layoutSwitcher","length","$currentItem","find","siblings","removeClass","addClass","filterProductsByUrl","url","options","settings","extend","loadMore","scrollTop","$btnLoadMore","decodeURIComponent","history","pushState","document","body","trigger","ajax","type","dataType","success","response","$response","$gridWrapper","$newItems","children","remove","fragments","MinimogGridLayout","totalFragments","id","push","i","key","$key","empty","$newElement","html","offsetTop","offset","top","Math","max","animate","$thisSidebar","hasClass","stop","slideDown","perfectScrollbar","isHandheld","beforeSend","setElementHandling","setBodyHandling","complete","unsetElementHandling","setBodyCompleted","ready","SELECTED_CLASS","lastST","$window","$el","$item","newLayout","newGridOptions","columns","disableColumnChange","$widget","not","wrapAll","closest","slideUp","$button","currentST","windowHeight","height","halfWH","parseInt","outerHeight","$link","parent","$list","href","toggleClass","unsetBodyOverflow","$form","$filterName","$queryType","filterVal","val","addUrlParam","removeUrlParam","minPrice","maxPrice","location","jQuery"],"mappings":"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","file":"../../common-archive.min.js","sourcesContent":["/**\n * Functions for archive pages.\n */\n(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar $body             = $( 'body' ),\n\t\t    $pageSidebars     = $( '.page-sidebar' ),\n\t\t    Helpers           = window.minimog.Helpers,\n\t\t    collapseDuration  = 250,\n\t\t    COLLAPSED_CLASS   = 'collapsed',\n\t\t    COLLAPSIBLE_CLASS = 'sidebar-widgets-collapsible';\n\n\t\t$( document ).ready( function() {\n\t\t\tinitArchiveLayoutSwitcher();\n\t\t\tinitArchiveSidebarWidgetsCollapsible();\n\t\t\thandlerScrollInfinite();\n\t\t\tinitSelect2LayeredNavDropdown();\n\n\t\t\t$( document.body ).on( 'MinimogGridLayoutColumnsChange', updateLayoutSwitcherState );\n\n\t\t\t$( document.body ).on( 'click', '.minimog-wp-widget-filter .filter-link', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $link = $( this ),\n\t\t\t\t    $item = $link.parent( 'li' ),\n\t\t\t\t    $list = $link.closest( 'ul' ),\n\t\t\t\t    href  = $link.attr( 'href' );\n\n\t\t\t\tif ( $list.hasClass( 'single-choice' ) ) {\n\t\t\t\t\tif ( $item.hasClass( 'chosen' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t$item.addClass( 'chosen' ).siblings().removeClass( 'chosen' );\n\t\t\t\t} else {\n\t\t\t\t\t$link.parent( 'li' ).toggleClass( 'chosen' );\n\t\t\t\t}\n\n\t\t\t\tvar $thisSidebar = $( this ).closest( '.page-sidebar' );\n\t\t\t\tif ( $thisSidebar.length > 0 ) {\n\t\t\t\t\t$body.removeClass( 'off-sidebar-opened' );\n\t\t\t\t\t$thisSidebar.removeClass( 'off-sidebar-active' );\n\t\t\t\t\tHelpers.unsetBodyOverflow();\n\t\t\t\t}\n\n\t\t\t\tfilterProductsByUrl( href );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'click', '.js-product-filter-link', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $link = $( this );\n\n\t\t\t\tif ( $link.hasClass( 'disabled' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar href = $link.attr( 'href' );\n\n\t\t\t\tfilterProductsByUrl( href );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'change', '.minimog-wp-widget-product-layered-nav-dropdown', function() {\n\t\t\t\t$( this ).closest( 'form' ).trigger( 'submit' );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'submit', '.minimog-wp-widget-product-layered-nav-form', function() {\n\t\t\t\tvar $form       = $( this ),\n\t\t\t\t    $filterName = $form.find( '.filter-name' ),\n\t\t\t\t    $queryType  = $form.find( '.filter-query-type' ),\n\t\t\t\t    filterVal   = $filterName.val(),\n\t\t\t\t    href        = $form.attr( 'action' );\n\n\t\t\t\thref = Helpers.addUrlParam( href, $filterName.attr( 'name' ), filterVal );\n\n\t\t\t\tif ( $queryType.length > 0 ) {\n\t\t\t\t\tif ( '' === filterVal ) {\n\t\t\t\t\t\thref = Helpers.removeUrlParam( href, $queryType.attr( 'name' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\thref = Helpers.addUrlParam( href, $queryType.attr( 'name' ), $queryType.val() );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterProductsByUrl( href );\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'submit', '.form-product-price-filter', function() {\n\t\t\t\tvar $form    = $( this ),\n\t\t\t\t    minPrice = $form.find( '#min_price' ).val(),\n\t\t\t\t    maxPrice = $form.find( '#max_price' ).val(),\n\t\t\t\t    href     = $form.attr( 'action' );\n\n\t\t\t\thref = Helpers.addUrlParam( href, 'min_price', minPrice );\n\t\t\t\thref = Helpers.addUrlParam( href, 'max_price', maxPrice );\n\n\t\t\t\tfilterProductsByUrl( href );\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'click', '.woocommerce-pagination a.page-numbers', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tfilterProductsByUrl( $( this ).attr( 'href' ), { scrollTop: 1 } );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'click', '.shop-load-more-button', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tfilterProductsByUrl( $( this ).attr( 'data-url' ), { loadMore: 1 } );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'change', '.js-product-ordering select.orderby', function() {\n\t\t\t\tvar url = Helpers.addUrlParam( window.location.href, 'orderby', $( this ).val() );\n\n\t\t\t\tfilterProductsByUrl( url );\n\t\t\t} );\n\t\t} );\n\n\t\t$( document.body ).on( 'minimog_get_product_fragments_loaded', function() {\n\t\t\tinitSelect2LayeredNavDropdown();\n\n\t\t\t$( document.body ).trigger( 'init_price_filter' );\n\t\t} );\n\n\t\t// Use Select2 enhancement if possible.\n\t\tfunction initSelect2LayeredNavDropdown() {\n\t\t\tif ( typeof $.fn.selectWoo !== 'function' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$( '.minimog-wp-widget-product-layered-nav-dropdown' ).each( function() {\n\t\t\t\tvar $dropdown = $( this );\n\n\t\t\t\t$dropdown.selectWoo( {\n\t\t\t\t\tplaceholder: $dropdown.data( 'placeholder' ),\n\t\t\t\t\tminimumResultsForSearch: 5,\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tallowClear: ! $dropdown.attr( 'multiple' ),\n\t\t\t\t\tlanguage: {\n\t\t\t\t\t\tnoResults: function() {\n\t\t\t\t\t\t\treturn $minimog.i18l.noMatchesFound;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ).on( 'select2:unselecting', function( evt ) {\n\t\t\t\t\t// We need close dropdown on unselecting to avoid bug on re-init.\n\t\t\t\t\t$( this ).on( \"select2:opening.cancelOpen\", function( evt ) {\n\t\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\t\t$( this ).off( \"select2:opening.cancelOpen\" );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tfunction updateLayoutSwitcherState( evt, $grid, oldColumns, newColumns ) {\n\t\t\tvar $layoutSwitcher = $( '#archive-layout-switcher' );\n\n\t\t\tif ( 0 >= $layoutSwitcher.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $currentItem = $layoutSwitcher.find( '.switcher-item[data-columns=' + newColumns + ']' );\n\t\t\tif ( $currentItem.length > 0 ) {\n\t\t\t\t$currentItem.siblings().removeClass( 'selected' );\n\t\t\t\t$currentItem.addClass( 'selected' );\n\t\t\t}\n\t\t}\n\n\t\tfunction filterProductsByUrl( url, options = {} ) {\n\t\t\tvar settings = $.extend( true, {}, {\n\t\t\t\tloadMore: 0,\n\t\t\t\tscrollTop: 0\n\t\t\t}, options );\n\n\t\t\turl = decodeURIComponent( url );\n\n\t\t\tif ( ! settings.loadMore ) {\n\t\t\t\thistory.pushState( {}, null, url );\n\t\t\t}\n\n\t\t\tvar $btnLoadMore = $( '.shop-load-more-button' );\n\n\t\t\t$( document.body ).trigger( 'minimog_getting_product' );\n\n\t\t\t$.ajax( {\n\t\t\t\turl: url,\n\t\t\t\ttype: 'GET',\n\t\t\t\tdataType: 'html',\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tvar $response = $( response );\n\n\t\t\t\t\tvar $gridWrapper = $( '#minimog-main-post' );\n\n\t\t\t\t\tif ( ! settings.loadMore ) {\n\t\t\t\t\t\t$gridWrapper.children( '.minimog-grid' ).children( '.grid-item' ).remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $newItems = $response.find( '#minimog-main-post .grid-item' );\n\t\t\t\t\t$gridWrapper.MinimogGridLayout( 'update', $newItems );\n\n\t\t\t\t\tvar fragments = [\n\t\t\t\t\t\t'.woocommerce-result-count',\n\t\t\t\t\t\t'.woocommerce-pagination',\n\t\t\t\t\t\t'.form-product-price-filter',\n\t\t\t\t\t\t'#active-filters-bar',\n\t\t\t\t\t];\n\n\t\t\t\t\tvar $filterWidgets = $( '.minimog-wp-widget-filter' );\n\n\t\t\t\t\t$filterWidgets.each( function() {\n\t\t\t\t\t\tvar id = $( this ).attr( 'id' );\n\t\t\t\t\t\tfragments.push( '#' + id );\n\t\t\t\t\t} );\n\n\t\t\t\t\tvar totalFragments = fragments.length;\n\n\t\t\t\t\tfor ( var i = 0; i < totalFragments; i ++ ) {\n\t\t\t\t\t\tvar key  = fragments[ i ],\n\t\t\t\t\t\t    $key = $( key );\n\n\t\t\t\t\t\tif ( $key.length > 0 ) {\n\t\t\t\t\t\t\t$key.empty();\n\t\t\t\t\t\t\tvar $newElement = $response.find( key );\n\t\t\t\t\t\t\tif ( $newElement.length > 0 ) {\n\t\t\t\t\t\t\t\t//$key.replaceWith( $newElement );\n\t\t\t\t\t\t\t\t$key.html( $newElement.html() );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$( document.body ).trigger( 'minimog_get_product_fragments_loaded', [ $response ] );\n\n\t\t\t\t\tif ( settings.scrollTop ) {\n\t\t\t\t\t\tvar offsetTop = $gridWrapper.offset().top;\n\t\t\t\t\t\toffsetTop -= 198; // Header + topbar + filter bar.\n\t\t\t\t\t\toffsetTop = Math.max( 0, offsetTop );\n\n\t\t\t\t\t\t$( 'html, body' ).animate( { scrollTop: offsetTop }, 300 );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Disable collapse if it open before.\n\t\t\t\t\t$pageSidebars.each( function() {\n\t\t\t\t\t\tvar $thisSidebar = $( this );\n\t\t\t\t\t\tif ( $thisSidebar.hasClass( COLLAPSIBLE_CLASS ) ) {\n\t\t\t\t\t\t\t$thisSidebar.find( '.widget:not(.' + COLLAPSED_CLASS + ')' ).find( '.widget-content' ).stop().slideDown( collapseDuration );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Update Widget Scrollable size.\n\t\t\t\t\tif ( $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t\t\t\t$pageSidebars.find( '.widget-scrollable' ).each( function() {\n\t\t\t\t\t\t\t$( this ).find( '.widget-content-inner' ).perfectScrollbar( 'update' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tif ( settings.loadMore ) {\n\t\t\t\t\t\tHelpers.setElementHandling( $btnLoadMore );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tHelpers.setBodyHandling();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tif ( settings.loadMore ) {\n\t\t\t\t\t\tHelpers.unsetElementHandling( $btnLoadMore );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tHelpers.setBodyCompleted();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction handlerScrollInfinite() {\n\t\t\tvar $el = $( '.woocommerce-pagination' );\n\n\t\t\tif ( 'infinite' !== $el.data( 'type' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar lastST = 0;\n\t\t\tvar $window = $( window );\n\n\t\t\t$window.on( 'scroll', function() {\n\t\t\t\tvar currentST = $( this ).scrollTop();\n\n\t\t\t\t// Scroll down only.\n\t\t\t\tif ( currentST > lastST ) {\n\t\t\t\t\tvar windowHeight = $window.height(),\n\t\t\t\t\t    // 90% window height.\n\t\t\t\t\t    halfWH       = parseInt( 90 / 100 * windowHeight ),\n\t\t\t\t\t    elOffsetTop  = $el.offset().top,\n\t\t\t\t\t    elHeight     = $el.outerHeight( true ),\n\t\t\t\t\t    offsetTop    = elOffsetTop + elHeight,\n\t\t\t\t\t    finalOffset  = offsetTop - halfWH;\n\n\t\t\t\t\tif ( currentST >= finalOffset ) {\n\t\t\t\t\t\tvar $button = $el.find( '.shop-load-more-button' );\n\n\t\t\t\t\t\tif ( ! $button.hasClass( 'updating-icon' ) ) {\n\t\t\t\t\t\t\t$button.trigger( 'click' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlastST = currentST;\n\t\t\t} );\n\t\t}\n\n\t\tfunction initArchiveLayoutSwitcher() {\n\t\t\tvar $layoutSwitcher = $( '#archive-layout-switcher' ),\n\t\t\t    $gridWrapper    = $( '.minimog-main-post' ),\n\t\t\t    SELECTED_CLASS  = 'selected';\n\n\t\t\t$layoutSwitcher.on( 'click', '.switcher-item', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $item = $( this );\n\n\t\t\t\tif ( $item.hasClass( SELECTED_CLASS ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$item.siblings().removeClass( SELECTED_CLASS );\n\t\t\t\t$item.addClass( SELECTED_CLASS );\n\n\t\t\t\tvar newLayout = $item.data( 'layout' );\n\t\t\t\tvar newGridOptions = {};\n\n\t\t\t\t$gridWrapper.addClass( 'layout-switching' );\n\n\t\t\t\tswitch ( newLayout ) {\n\t\t\t\t\tcase 'grid-one':\n\t\t\t\t\t\tnewGridOptions.columns = 1;\n\t\t\t\t\t\tnewGridOptions.disableColumnChange = true;\n\t\t\t\t\t\t$gridWrapper.addClass( 'style-list' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'grid-two':\n\t\t\t\t\t\tnewGridOptions.columns = 2;\n\t\t\t\t\t\tnewGridOptions.disableColumnChange = false;\n\t\t\t\t\t\t$gridWrapper.removeClass( 'style-list' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'grid-three':\n\t\t\t\t\t\tnewGridOptions.columns = 3;\n\t\t\t\t\t\tnewGridOptions.disableColumnChange = false;\n\t\t\t\t\t\t$gridWrapper.removeClass( 'style-list' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'grid-four':\n\t\t\t\t\t\tnewGridOptions.columns = 4;\n\t\t\t\t\t\tnewGridOptions.disableColumnChange = false;\n\t\t\t\t\t\t$gridWrapper.removeClass( 'style-list' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'grid-five':\n\t\t\t\t\t\tnewGridOptions.columns = 5;\n\t\t\t\t\t\tnewGridOptions.disableColumnChange = false;\n\t\t\t\t\t\t$gridWrapper.removeClass( 'style-list' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t$gridWrapper.MinimogGridLayout( 'updateLayout', newGridOptions );\n\t\t\t\t$gridWrapper.on( 'MinimogGridLayoutResized', function() {\n\t\t\t\t\t$gridWrapper.removeClass( 'layout-switching' );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tfunction initArchiveSidebarWidgetsCollapsible() {\n\t\t\tif ( 0 >= $pageSidebars.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$pageSidebars.find( '.widget' ).each( function() {\n\t\t\t\tvar $widget = $( this );\n\n\t\t\t\tif ( $widget.hasClass( 'widget_block' ) ) { // Fix block group.\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Wrap content with new div.\n\t\t\t\t$widget.children().not( '.widget-title, .widgettitle, .widget-instance, .widget-content' ).wrapAll( '<div class=\"widget-content\"><div class=\"widget-content-inner\"></div></div>' );\n\n\t\t\t\tif ( $widget.hasClass( 'widget-scrollable' ) && $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t\t\t$widget.find( '.widget-content-inner' ).perfectScrollbar();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$pageSidebars.each( function() {\n\t\t\t\tvar $thisSidebar = $( this );\n\t\t\t\tif ( $thisSidebar.hasClass( COLLAPSIBLE_CLASS ) ) {\n\t\t\t\t\t$thisSidebar.on( 'click', '.widget-title, .widgettitle', function( evt ) {\n\t\t\t\t\t\tvar $widget = $( this ).closest( '.widget' );\n\t\t\t\t\t\tif ( $widget.hasClass( COLLAPSED_CLASS ) ) {\n\t\t\t\t\t\t\t$widget.removeClass( COLLAPSED_CLASS );\n\t\t\t\t\t\t\t$widget.find( '.widget-content' ).stop().slideDown( collapseDuration );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$widget.addClass( COLLAPSED_CLASS );\n\t\t\t\t\t\t\t$widget.find( '.widget-content' ).stop().slideUp( collapseDuration );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t}( jQuery )\n);\n"]}