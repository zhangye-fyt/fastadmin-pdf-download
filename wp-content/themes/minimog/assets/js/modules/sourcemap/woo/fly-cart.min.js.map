{"version":3,"sources":["fly-cart.js"],"names":["$","$body","$popupFlyCart","ACTIVE_CLASS","Helpers","window","minimog","remove_from_cart","evt","$thisButton","wc_add_to_cart_params","preventDefault","this","ajax","type","url","$minimogWoo","wc_ajax_url","toString","replace","data","cart_item_key","dataType","beforeSend","block_loading","success","response","fragments","document","body","trigger","cart_hash","unblock_loading","location","attr","error","save_order_notes","$submitButton","find","notes","val","$minimog","ajaxurl","action","order_notes","each","key","value","replaceWith","setElementHandling","complete","unsetElementHandling","close_addon_modal","open_fly_cart","setBodyOverflow","addClass","fn","perfectScrollbar","isHandheld","setTimeout","handleLazyImages","handle_cart_body_scrollbar","hasClass","close_fly_cart","unsetBodyOverflow","removeClass","is_fly_cart_opening","offsetTop","offset","top","$cartHeader","$cartBody","$cartFooter","bodyH","innerHeight","outerHeight","Math","max","wheelPropagation","slideUp","empty","shipping_method_selected","shipping_methods","closest","security","nonce","shipping_method","setBodyHandling","setBodyCompleted","shipping_calculator_submit","$form","currentTarget","appendTo","serialize","$newElement","parseHTML","html","update_cart_goal","$cartData","first","length","cartData","count","free_shipping_class_only","$parent","$progress","newAmount","parseFloat","css","width","init_cart_countdown","MinimogCountdownTimer","$timer","$countdown","settings","startTime","Date","now","options","endTime","addZeroPrefix","formatter","loop","callback","text","expired_message","ready","timeout","on","$button","$wishlistModal","$quickViewModal","MinimogModal","add_to_cart_behaviour","e","target","targetSelector","$flyCartModal","modalTemplate","getAjaxUrl","template","context","cache","$qty","undefined","clearTimeout","cart_item_qty","itemKey","itemQty","jQuery"],"mappings":"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","file":"../../../woo/fly-cart.min.js","sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar $body         = $( 'body' ),\n\t\t    $popupFlyCart = $( '#popup-fly-cart' ),\n\t\t    ACTIVE_CLASS  = 'popup-fly-cart-opened',\n\t\t    Helpers       = window.minimog.Helpers;\n\n\t\t$( document ).ready( function() {\n\t\t\tinitFlyCart();\n\t\t} );\n\n\t\t$( document.body ).on( 'wc_fragments_loaded wc_fragments_refreshed', function() {\n\t\t\tunblock_loading();\n\n\t\t\tupdate_cart_goal();\n\t\t\tinit_cart_countdown();\n\n\t\t\tif ( $body.hasClass( ACTIVE_CLASS ) ) {\n\t\t\t\tHelpers.handleLazyImages( $popupFlyCart );\n\t\t\t\thandle_cart_body_scrollbar();\n\t\t\t}\n\t\t} );\n\n\t\t$( document.body ).on( 'removed_coupon applied_coupon', update_cart_goal );\n\n\t\t$( window ).on( 'load', init_cart_countdown );\n\n\t\tfunction initFlyCart() {\n\t\t\t$( document.body ).on( 'click', '.mini-cart__button', function( evt ) {\n\t\t\t\tif ( $popupFlyCart.length > 0 ) {\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\topen_fly_cart();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$body.on( 'added_to_cart', function( evt, fragments, cart_hash, $button ) {\n\t\t\t\t/**\n\t\t\t\t * Fix Elementor Pro trigger this hook with poor params.\n\t\t\t\t */\n\t\t\t\tif ( typeof $button === 'undefined' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Close quick view modal when product adding to cart.\n\t\t\t\tvar $quickViewModal = $button.closest( '.modal-quick-view-popup' );\n\t\t\t\tif ( $quickViewModal.length > 0 && $.fn.MinimogModal ) {\n\t\t\t\t\t$quickViewModal.MinimogModal( 'close' );\n\t\t\t\t}\n\n\t\t\t\t// Close wishlist modal when product adding to cart.\n\t\t\t\tvar $wishlistModal = $button.closest( '#woosw_wishlist' );\n\t\t\t\tif ( $wishlistModal.length > 0 ) {\n\t\t\t\t\t$wishlistModal.removeClass( 'woosw-show' );\n\t\t\t\t\t$( document.body ).trigger( 'woosw_wishlist_hide' );\n\t\t\t\t}\n\n\t\t\t\tif ( $popupFlyCart.length > 0 && 'open_cart_drawer' === $minimogWoo.add_to_cart_behaviour ) {\n\t\t\t\t\topen_fly_cart();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( '#btn-close-fly-cart' ).on( 'click', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tclose_fly_cart();\n\t\t\t} );\n\n\t\t\t$popupFlyCart.on( 'click', function( e ) {\n\t\t\t\tif ( e.target !== this ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclose_fly_cart();\n\t\t\t} );\n\n\t\t\t$( document ).on( 'click', '.fly-cart-addon-modal-toggle', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tvar targetSelector = $( this ).data( 'target' );\n\n\t\t\t\tvar $flyCartModal = $( targetSelector );\n\n\t\t\t\tif ( $flyCartModal.length > 0 ) {\n\t\t\t\t\tvar modalTemplate = $flyCartModal.data( 'minimog-template' );\n\t\t\t\t\tif ( ! $flyCartModal.hasClass( 'template-loaded' ) && modalTemplate ) {\n\t\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\t\turl: Helpers.getAjaxUrl( 'template_lazyload' ),\n\t\t\t\t\t\t\ttype: 'GET',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttemplate: modalTemplate,\n\t\t\t\t\t\t\t\tcontext: 'wc_cart'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\t\t\t\t$flyCartModal.html( response.data.template );\n\n\t\t\t\t\t\t\t\t\tif ( $flyCartModal.hasClass( 'modal-shipping-calculator' ) ) {\n\t\t\t\t\t\t\t\t\t\t$( document.body ).trigger( 'country_to_state_changed' ); // Trigger select2 to load.\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t$popupFlyCart.addClass( 'modal-open' );\n\t\t\t\t\t\t\t\t\t$flyCartModal.addClass( 'open' );\n\t\t\t\t\t\t\t\t\t$flyCartModal.addClass( 'template-loaded' );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t\t\t\tblock_loading();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t\t\tunblock_loading()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$popupFlyCart.addClass( 'modal-open' );\n\n\t\t\t\t\t\t$flyCartModal.addClass( 'open' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$popupFlyCart.on( 'click', '.btn-close-fly-cart-modal', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tclose_addon_modal();\n\t\t\t} );\n\n\t\t\t$popupFlyCart.on( 'click', '.js-remove-from-cart', remove_from_cart );\n\n\t\t\tvar timeout;\n\t\t\t$popupFlyCart.on( 'change', '.qty', function() {\n\t\t\t\tvar $qty = $( this );\n\n\t\t\t\tif ( timeout !== undefined ) {\n\t\t\t\t\tclearTimeout( timeout );\n\t\t\t\t}\n\n\t\t\t\ttimeout = setTimeout( function() {\n\t\t\t\t\tvar itemKey = $qty.attr( 'name' );\n\t\t\t\t\tvar itemQty = $qty.val();\n\n\t\t\t\t\tupdate_quantity( itemKey, itemQty );\n\t\t\t\t}, 500 );\n\t\t\t} );\n\n\t\t\t$popupFlyCart.on( 'submit', '.form-fly-cart-order-notes', save_order_notes );\n\n\t\t\t// Shipping calculate.\n\t\t\t$( document ).on( 'change', 'select.shipping_method, :input[name^=shipping_method]', shipping_method_selected );\n\n\t\t\t$( document ).on( 'submit', 'form.fly-cart-shipping-calculator', shipping_calculator_submit );\n\t\t}\n\n\t\tfunction remove_from_cart( evt ) {\n\t\t\t/**\n\t\t\t * Check if Enable AJAX add to cart buttons on archives.\n\t\t\t */\n\t\t\tif ( typeof wc_add_to_cart_params === 'undefined' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevt.preventDefault();\n\n\t\t\tvar $thisButton = $( this );\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: $minimogWoo.wc_ajax_url.toString().replace( '%%endpoint%%', 'remove_from_cart' ),\n\t\t\t\tdata: {\n\t\t\t\t\tcart_item_key: $thisButton.data( 'cart_item_key' )\n\t\t\t\t},\n\t\t\t\tdataType: 'json',\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tblock_loading();\n\t\t\t\t},\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tif ( ! response || ! response.fragments ) {\n\t\t\t\t\t\twindow.location = $thisButton.attr( 'href' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t$( document.body ).trigger( 'removed_from_cart', [\n\t\t\t\t\t\tresponse.fragments, response.cart_hash, $thisButton\n\t\t\t\t\t] );\n\n\t\t\t\t\tunblock_loading();\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\twindow.location = $thisButton.attr( 'href' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction update_quantity( cart_item_key, cart_item_qty ) {\n\t\t\tvar data = {\n\t\t\t\taction: 'minimog_update_product_quantity',\n\t\t\t\tcart_item_key: cart_item_key,\n\t\t\t\tcart_item_qty: cart_item_qty,\n\t\t\t\tsecurity: $minimog.nonce,\n\t\t\t};\n\n\t\t\t$.ajax( {\n\t\t\t\turl: $minimog.ajaxurl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tcache: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tcart_reload();\n\n\t\t\t\t\t$( document.body ).trigger( 'minimog_update_qty', [ cart_item_key, cart_item_qty ] );\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tblock_loading();\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction save_order_notes() {\n\t\t\tvar $form         = $( this );\n\t\t\tvar $submitButton = $form.find( 'button[type=submit]' );\n\n\t\t\tvar notes = $( this ).find( 'textarea[name=\"order_comments\"]' ).val();\n\n\t\t\tvar data = {\n\t\t\t\taction: 'minimog_save_order_notes',\n\t\t\t\torder_notes: notes,\n\t\t\t};\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: $minimog.ajaxurl,\n\t\t\t\tdata: data,\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tif ( response.data && response.data.fragments ) {\n\t\t\t\t\t\t$.each( response.data.fragments, function( key, value ) {\n\t\t\t\t\t\t\t$( key ).replaceWith( value );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Sync notes on other places.\n\t\t\t\t\t$( 'textarea[name=\"order_comments\"]' ).val( notes );\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tHelpers.setElementHandling( $submitButton );\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tHelpers.unsetElementHandling( $submitButton );\n\t\t\t\t\tclose_addon_modal();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction open_fly_cart() {\n\t\t\tHelpers.setBodyOverflow();\n\n\t\t\t$body.addClass( ACTIVE_CLASS );\n\n\t\t\thandle_cart_wrap_scrollbar();\n\n\t\t\tHelpers.handleLazyImages( $popupFlyCart );\n\n\t\t\thandle_cart_body_scrollbar();\n\n\t\t\tif ( ! $popupFlyCart.hasClass( 'opened' ) ) {\n\t\t\t\t//block_loading(); Move it to below event.\n\t\t\t\t$( document.body ).trigger( 'minimog_fly_cart_first_open', [ $popupFlyCart ] );\n\t\t\t}\n\n\t\t\t$popupFlyCart.addClass( 'opened' ); // Used this class to load content on first time.\n\t\t}\n\n\t\tfunction close_fly_cart() {\n\t\t\tHelpers.unsetBodyOverflow();\n\n\t\t\t$body.removeClass( ACTIVE_CLASS );\n\t\t}\n\n\t\tfunction is_fly_cart_opening() {\n\t\t\tif ( $body.hasClass( ACTIVE_CLASS ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction close_addon_modal() {\n\t\t\t$popupFlyCart.find( '.fly-cart-addon-modal' ).removeClass( 'open' );\n\t\t\t$popupFlyCart.removeClass( 'modal-open' );\n\t\t}\n\n\t\tfunction cart_reload() {\n\t\t\t$( document.body ).trigger( 'wc_fragment_refresh' );\n\t\t}\n\n\t\tfunction handle_cart_wrap_scrollbar() {\n\t\t\tif ( ! $.fn.perfectScrollbar || Helpers.isHandheld() ) { // Use default scrollbar.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Add delay to fixed wrong calculate of scrollbar on first load.\n\t\t\tsetTimeout( function() {\n\t\t\t\t$popupFlyCart.find( '.fly-cart-wrap' ).perfectScrollbar();\n\t\t\t}, 100 );\n\t\t}\n\n\t\tfunction handle_cart_body_scrollbar() {\n\t\t\tvar offsetTop   = $popupFlyCart.offset().top; // Admin bar.\n\t\t\tvar $cartHeader = $popupFlyCart.find( '.fly-cart-header' );\n\t\t\tvar $cartBody   = $popupFlyCart.find( '.fly-cart-body' );\n\t\t\tvar $cartFooter = $popupFlyCart.find( '.fly-cart-footer' );\n\t\t\tvar windowH     = window.innerHeight;\n\n\t\t\t// 20 is spacing from body to footer.\n\t\t\tvar bodyH = windowH - $cartHeader.outerHeight() - $cartFooter.outerHeight() - 20 - offsetTop;\n\t\t\tbodyH     = Math.max( bodyH, 400 );\n\n\t\t\t$cartBody.outerHeight( bodyH );\n\n\t\t\tif ( $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t\t$cartBody.perfectScrollbar( {\n\t\t\t\t\twheelPropagation: true\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tfunction block_loading() {\n\t\t\t$popupFlyCart.find( '.fly-cart-messages' ).slideUp( 300, function() {\n\t\t\t\t$popupFlyCart.find( '.fly-cart-messages' ).empty();\n\t\t\t} );\n\t\t\t$popupFlyCart.removeClass( 'loaded' ).addClass( 'loading' );\n\t\t}\n\n\t\tfunction unblock_loading() {\n\t\t\t$popupFlyCart.removeClass( 'loading' ).addClass( 'loaded' );\n\t\t}\n\n\t\t/**\n\t\t * Clone from wc-cart\n\t\t * Handles when a shipping method is selected.\n\t\t */\n\t\tfunction shipping_method_selected() {\n\t\t\tvar shipping_methods = {};\n\n\t\t\tvar $wrapper = $( this ).closest( '.woocommerce-shipping-methods' );\n\n\t\t\t// eslint-disable-next-line max-len\n\t\t\t$wrapper.find( 'select.shipping_method, :input[name^=shipping_method][type=radio]:checked, :input[name^=shipping_method][type=hidden]' ).each( function() {\n\t\t\t\tshipping_methods[$( this ).data( 'index' )] = $( this ).val();\n\t\t\t} );\n\n\t\t\tvar data = {\n\t\t\t\tsecurity: $minimog.nonce,\n\t\t\t\tshipping_method: shipping_methods,\n\t\t\t\taction: 'minimog_update_shipping_method'\n\t\t\t};\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: $minimog.ajaxurl,\n\t\t\t\tdata: data,\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tif ( response.data && response.data.fragments ) {\n\t\t\t\t\t\t$.each( response.data.fragments, function( key, value ) {\n\t\t\t\t\t\t\t$( key ).replaceWith( value );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tif ( is_fly_cart_opening() ) {\n\t\t\t\t\t\tblock_loading();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tHelpers.setBodyHandling();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tif ( is_fly_cart_opening() ) {\n\t\t\t\t\t\tunblock_loading();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tHelpers.setBodyCompleted();\n\t\t\t\t\t}\n\t\t\t\t\t$( document.body ).trigger( 'updated_shipping_method' );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t * Clone from wc-cart\n\t\t * Handles a shipping calculator form submit.\n\t\t *\n\t\t * @param {Object} evt The JQuery event.\n\t\t */\n\t\tfunction shipping_calculator_submit( evt ) {\n\t\t\tevt.preventDefault();\n\n\t\t\tclose_addon_modal();\n\t\t\tblock_loading();\n\n\t\t\tvar $form = $( evt.currentTarget );\n\n\t\t\t$( '<input />' ).attr( 'type', 'hidden' )\n\t\t\t                .attr( 'name', 'action' )\n\t\t\t                .attr( 'value', 'minimog_calculate_shipping' )\n\t\t\t                .appendTo( $form );\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: $form.attr( 'method' ),\n\t\t\t\turl: $minimog.ajaxurl,\n\t\t\t\tdata: $form.serialize(),\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tif ( response.data.fragments ) {\n\t\t\t\t\t\t$.each( response.data.fragments, function( key, value ) {\n\t\t\t\t\t\t\t$( key ).empty();\n\n\t\t\t\t\t\t\tif ( '' !== value ) {\n\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t * Append only children.\n\t\t\t\t\t\t\t\t * Avoid to use replaceWith to lost \"key\" events\n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\tvar $newElement = $( $.parseHTML( value ) );\n\t\t\t\t\t\t\t\t$( key ).html( $newElement.html() );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tunblock_loading();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction update_cart_goal() {\n\t\t\tvar $cartData = $( '.cart-data-info' ).first();\n\t\t\tif ( $cartData.length > 0 ) {\n\t\t\t\tvar cartData = $cartData.data( 'value' );\n\n\t\t\t\tif ( 0 >= cartData.count ) {\n\t\t\t\t\t$body.addClass( 'cart-is-empty' );\n\t\t\t\t} else {\n\t\t\t\t\t$body.removeClass( 'cart-is-empty' );\n\t\t\t\t}\n\n\t\t\t\tif ( typeof cartData.free_shipping_class_only === 'number' && 1 === cartData.free_shipping_class_only ) {\n\t\t\t\t\t$body.addClass( 'cart-includes-only-free-shipping-class' );\n\t\t\t\t} else {\n\t\t\t\t\t$body.removeClass( 'cart-includes-only-free-shipping-class' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$( '.cart-goal-percent' ).each( function() {\n\t\t\t\tvar $parent   = $( this ).closest( '.cart-goal' ),\n\t\t\t\t    $progress = $parent.find( '.cart-goal-progress .progress-bar' ),\n\t\t\t\t    newAmount = parseFloat( $( this ).val() );\n\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$progress.css( {\n\t\t\t\t\t\twidth: newAmount + '%'\n\t\t\t\t\t} );\n\n\t\t\t\t\tnewAmount < 100 ? $parent.removeClass( 'cart-goal-done shakeY' ) : $parent.addClass( 'cart-goal-done shakeY' );\n\t\t\t\t}, 300 );\n\t\t\t} );\n\t\t}\n\n\t\tfunction init_cart_countdown() {\n\t\t\tvar $cartData = $( '.cart-data-info' ).first();\n\n\t\t\tif ( 0 >= $cartData.length || ! $.fn.MinimogCountdownTimer ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cartData = $cartData.data( 'value' );\n\n\t\t\t$( '.cart-countdown-timer' ).each( function() {\n\t\t\t\tvar $timer     = $( this ),\n\t\t\t\t    $countdown = $timer.find( '.timer' ),\n\t\t\t\t    settings   = $timer.data( 'countdown' ),\n\t\t\t\t    startTime  = Date.now(),\n\t\t\t\t    endTime    = startTime + settings.length * 60 * 1000;\n\n\t\t\t\tvar options = {\n\t\t\t\t\tstartTime: startTime,\n\t\t\t\t\tendTime: endTime,\n\t\t\t\t\taddZeroPrefix: true,\n\t\t\t\t\tformatter: settings.formatter,\n\t\t\t\t\tloop: settings.loop,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t$timer.find( '.cart-countdown-message' ).text( settings.expired_message );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Reset countdown on cart empty.\n\t\t\t\tif ( 0 >= cartData.count ) {\n\t\t\t\t\t$countdown.MinimogCountdownTimer( options );\n\t\t\t\t\t$countdown.MinimogCountdownTimer( 'clear' );\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t$countdown.MinimogCountdownTimer( options );\n\t\t\t} );\n\t\t}\n\t}( jQuery )\n);\n"]}