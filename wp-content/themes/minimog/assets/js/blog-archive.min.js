!function(a){"use strict";var r=window.minimog.Helpers;function t(n,i=!1){n=decodeURIComponent(n);var t=new URL(n),t=t.pathname+t.search,n=(i||history.pushState({},null,n),r.getUrlParamsAsObject(n)),t=(n.action="minimog_get_posts",n.base_url=t,a("#minimog-main-post-query")),t=(0<t.length&&(t=t.data("query"),jQuery.extend(n,t)),a(".minimog-wp-widget-filter")),o=[],e=(t.each(function(){var n,t=a(this).attr("id"),e=a(this).find(".widget-instance");0<e.length&&(n=e.data("instance"),e=e.data("name"),o.push({id:"#"+t,name:e,instance:n}))}),n.widgets=o,a(".archive-load-more-button"));a.ajax({url:$minimog.ajaxurl,type:"GET",data:n,dataType:"json",cache:!0,success:function(n){var t=a("#minimog-main-post"),e=(i||t.children(".minimog-grid").children(".grid-item").remove(),n.template),e=a(a.parseHTML(e));t.MinimogGridLayout("update",e),n.fragments&&(a.each(n.fragments,function(n,t){a(n).empty(),""!==t&&(t=a(a.parseHTML(t)),a(n).html(t.html()))}),a.fn.perfectScrollbar&&!r.isHandheld()&&a(".page-sidebar").find(".widget-scrollable").each(function(){a(this).find(".widget-content-inner").perfectScrollbar("update")}),a(document.body).trigger("minimog_get_product_fragments_loaded"))},beforeSend:function(){i?r.setElementHandling(e):r.setBodyHandling()},complete:function(){i?r.unsetElementHandling(e):r.setBodyCompleted()}})}a(document).ready(function(){var e,i,o;"infinite"===(o=a(".minimog-grid-pagination")).data("type")&&(e=0,(i=a(window)).on("scroll",function(){var n,t=a(this).scrollTop();e<t&&(n=.9*i.height(),n=parseInt(n),o.offset().top+o.outerHeight(!0)-n<=t)&&((n=o.find(".archive-load-more-button")).hasClass("updating-icon")||n.trigger("click")),e=t})),a(document.body).on("click",".minimog-grid-pagination a.page-numbers",function(n){n.preventDefault();n=a(this).attr("href");t(n.includes(window.location.origin)?n:window.location.origin+n)}),a(document.body).on("click",".archive-load-more-button",function(n){n.preventDefault();n=a(this).attr("data-url");t(n.includes(window.location.origin)?n:window.location.origin+n,!0)})})}(jQuery);