!function(f){"use strict";var a=f(window),r=f("body"),p=window.minimog.Helpers;function o(a,t,e,i,n){n=n.parents(".row-isw-swatch").first();(n.hasClass("row-isw-swatch--isw_color")||n.hasClass("row-isw-swatch--isw_image"))&&n.find(".selected-term-name").html(i)}function s(a,t){var e,i,n,r=a.find(".product-container"),o=r.find(".woo-single-info"),s=r.find(".woo-single-images"),d=a.find(".cart.variations_form"),c=(0<d.length&&"undefined"!=typeof wc_add_to_cart_variation_params&&(d.wc_variation_form(),"undefined"!=typeof isw)&&void 0!==isw.Swatches&&isw.Swatches.register(d),p.handleLazyImages(a),a.find(".variations_form")),d=d.find(".row-isw-swatch-quantity-wrap"),c=(c.find('select[name="quantity"]').MinimogNiceSelect({renderTarget:d}),s.children(".woo-single-gallery")),d=c.children(".minimog-main-swiper"),l={},c=(c.hasClass("has-thumbs-slider")&&(l={thumbs:{swiper:c.children(".minimog-thumbs-swiper").MinimogSwiper()}}),0<d.length&&d.MinimogSwiper(l),!0);767<window.innerWidth-p.getScrollbarWidth()&&(s=l=d=s.height(),e=window.innerHeight-60,o=o,c=!1,n=2*(i=r.data("quick-view")).spacing,i.imageCover?(o=r.find(".quick-view-col-summary .inner-content"),l=d+n,s=Math.min(e,l),0<i.spacing?s-=n:s-=60):(l=d+n,s=Math.min(e,l),s-=n),o.outerHeight(parseInt(s)),f.fn.perfectScrollbar&&!p.isHandheld()&&o.perfectScrollbar({suppressScrollX:!0}),i.imageCover)&&r.find(".woo-single-images").addClass("image-cover"),a.data("minimogModal")?a.MinimogModal("open"):a.MinimogModal({perfectScrollbar:c}),t.removeClass("loading")}f(document).ready(function(){f(document.body).on("click",".modal-quick-view-popup .woosw-btn",function(){var a=f(this).closest(".modal-quick-view-popup");0<a.length&&f.fn.MinimogModal&&a.MinimogModal("close")}),f(".minimog-product").on("click",".quick-view-btn",function(a){a.preventDefault(),a.stopPropagation();var t,e=f(this);e.hasClass("loading")||f.fn.MinimogModal&&(e.addClass("loading"),a=e.data("pid"),0<(t=r.children("#modal-quick-view-product-"+a)).length?s(t,e):f.ajax({url:$minimog.ajaxurl,type:"GET",data:f.param({action:"product_quick_view",pid:a}),dataType:"json",cache:!0,success:function(a){t=f(a.template),r.append(t),s(t,e)}}))}),function(){if("undefined"==typeof wc_add_to_cart_params)return;f(document).on("click",".ajax_add_variation_to_cart",function(a){a.preventDefault(),a.stopPropagation();var t=f(this),a=t.data("quantity"),e=0,i={},n=t.siblings('select[name="product_variation_id"]');if(0<n.length){n=n.children(":selected"),e=n.data("variation-id"),i=n.val();i=JSON.parse(i)}else{n=t.parents(".product").first().find(".variations_form");if(0<n.length){var r=!0;if(n.find("select[name^=attribute]").each(function(){var a=f(this),t=a.attr("name"),a=a.val();0===a.length?r=!1:i[t]=a}),!r)return window.alert("Please select a product option before adding this product to your cart."),!1;e=n.find(".variation_id").val()}}return e&&i?(t.removeClass("added").addClass("loading updating-icon"),i.quantity=a,i.product_id=e,f("body").trigger("adding_to_cart",[t,i]),f.post(p.getAjaxUrl("woocommerce_add_to_cart"),i,function(a){a&&(a.error&&a.product_url?window.location=a.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:f(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t]))}).always(function(){t.addClass("added").removeClass("loading updating-icon")})):window.alert("Please select a product option before adding this product to your cart."),!1})}(),function(){if("undefined"==typeof wc_add_to_cart_params)return;f(document).on("click","button.single_add_to_cart_button.ajax_add_to_cart",function(a){a.preventDefault();var t,e,i,n,r=f(this);return!r.hasClass("disabled")&&!r.hasClass("woosb-disabled")&&(t=(a=r.closest("form.cart")).find("[name=add-to-cart]").val(),e=a.find("input[name=variation_id]").val(),i=a.find(".quantity .qty[name=quantity]").val(),void(0!==(t="add-to-cart"===r.attr("name")?r.val():t)&&(n={product_id:t,variation_id:e},a.serializeArray().map(function(a){var t;"add-to-cart"!==a.name&&(a.name.endsWith("[]")?((t=a.name.substring(0,a.name.length-2))in n||(n[t]=[]),n[t].push(a.value)):n[a.name]=a.value)}),r.attr("data-qty")&&(i=parseInt(r.attr("data-qty"))),n.quantity=i,r.removeClass("added").addClass("loading updating-icon"),f("body").trigger("adding_to_cart",[r,n]),f.post(p.getAjaxUrl("woocommerce_add_to_cart"),n,function(a){var t;a&&(a.error&&a.product_url?window.location=a.product_url:(t=r.data("redirect"))&&""!==t?window.location=t:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:f(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,r]))}).always(function(){r.addClass("added").removeClass("loading updating-icon")}))))})}(),f(document.body).on("click",".js-product-variation-term",function(a){a.preventDefault();var a=f(this),t=a.parents(".loop-product-variation-selector").first(),e=t.closest(".product"),i=e.find(".product-main-image"),n=t.data("product_attribute"),r=t.data("product_variations"),t=t.data("product_variations_images"),o=!1;if(i.find(".variation-image").remove(),e.addClass("product-image-switching"),a.hasClass("selected"))p.resetContentHTML(e.find(".price")),e.removeClass("product-image-switching has-variation-selected"),a.removeClass("selected");else{a.siblings().removeClass("selected"),a.addClass("selected");var s=a.data("term"),a=e.find("select[name="+n+"]");0<a.length&&a.val(s).trigger("change");for(var d,c=r.length-1;0<=c;c--){var l=r[c];l.attributes&&Object.entries(l.attributes).forEach(([a,t])=>{n===a&&t===s&&(o=l)})}!1!==o&&(a=t[o.variation_id],t=i.children(".product-main-image-img"),(d=f("<img />",{class:"variation-image",src:a,alt:t.attr("alt")})).attr("width",t.attr("width")),d.attr("height",t.attr("height")),d.on("load",function(){i.append(d),e.removeClass("product-image-switching").addClass("has-variation-selected")}),""!==(a=o.price_html))&&p.setContentHTML(e.find(".price"),f(a).html())}}),f(".widget_product_categories").each(function(){var a=f(this),i="opened",a=(a.find(".cat-parent").each(function(){var a=f(this),t=f(this).children("a").clone(),e=$minimog.i18l.all,i=f('<li class="cat-item cat-item-all"></li>'),e=e.replace("%s",t.html());t.html(e),a.hasClass("current-cat")&&(a.removeClass("current-cat"),a.addClass("current-cat-parent"),i.addClass("current-cat")),i.append(t),f(this).children(".children").prepend(i)}),a.on("click","a",function(a){a.stopPropagation();var t=f(this),e=t.parent("li"),t=t.siblings(".children");0<t.length&&(a.preventDefault(),e.hasClass(i)?(e.removeClass(i),e.find("."+i).removeClass(i),t.stop().slideUp(250)):(e.siblings("."+i).removeClass(i).children(".children").stop().slideUp(250),e.addClass(i),t.stop().slideDown(250)))}),a.on("click","li.cat-parent",function(a){f(this).children("a").trigger("click")}),a.find(".current-cat-parent, .current-cat"));a.addClass(i),a.children(".children").stop().slideDown(250)});var t,i=f(".page-sidebar"),n=(f(document).on("click",".btn-js-open-off-sidebar",function(a){a.preventDefault();var a=f(this),a=i.filter(".sidebar-"+a.data("sidebar-target"));0<a.length&&(a.addClass("off-sidebar-active"),r.addClass("off-sidebar-opened"),p.setBodyOverflow(),(a=a.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),f.fn.perfectScrollbar)&&!p.isHandheld()&&a.perfectScrollbar({suppressScrollX:!0})}),f(document).on("click",".btn-close-off-sidebar",function(a){a.preventDefault(),r.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),p.unsetBodyOverflow()}),i.on("click",function(a){a.target===this&&(r.removeClass("off-sidebar-opened"),i.removeClass("off-sidebar-active"),p.unsetBodyOverflow())}),991);function e(){var a,t,e=i.filter(".sidebar-off-mobile");window.innerWidth<=n?(e.addClass("sidebar-switching sidebar-off"),(a=e.find(".page-sidebar-content-wrap")).outerHeight(window.innerHeight),f.fn.perfectScrollbar&&!p.isHandheld()&&a.perfectScrollbar({suppressScrollX:!0})):(e.addClass("sidebar-switching").removeClass("sidebar-off"),r.removeClass("off-sidebar-opened"),p.unsetBodyOverflow(),t=(a=e.find(".page-sidebar-content-wrap")).data("perfectScrollbar"),a.css("height","auto"),f.fn.perfectScrollbar&&t&&t.destroy()),setTimeout(function(){e.removeClass("sidebar-switching")},350)}(r.hasClass("page-sidebar1-off-mobile")||r.hasClass("page-sidebar2-off-mobile"))&&(t=window.innerWidth,e(),a.on("resize",function(){var a=!0;t!==window.innerWidth&&(a=!(t<=n&&window.innerWidth<=n||n<t&&window.innerWidth>n)&&a)&&e(),t=window.innerWidth})),r.on("isw_selected",o),f(document.body).on("change",".product-variation-select",function(){var a=f(this).parents(".minimog-variation-select-wrap").find(".variations_form"),t=f(this).val();if(""!==t){var e=JSON.parse(t);for(const i in e)a.find('select[name="'+i+'"]').val(e[i]).trigger("change")}else a.find(".reset_variations").trigger("click")}),f("body").on("change",'input[name="payment_method"], #billing_country, #shipping_country, #shipping_state, #billing_state',function(){setTimeout(function(){f("body").trigger("update_checkout")},2e3)}),f(document.body).on("show_variation",".variations_form",function(a,t){var e=f(this),i=e.find('input[name="variation_id"]').val();i&&(e.find(".wad-qty-pricing-table").hide(),e.find('.wad-qty-pricing-table[data-id="'+i+'"]').show())})}),f(document).on("found_variation",".variations_form",function(a,t){var a=f(a.target).closest(".product"),e=a.find(".entry-price-wrap").find(".price"),a=a.find(".entry-product-badges");t.price_html&&p.setContentHTML(e,f(t.price_html).html()),"string"==typeof t.sale_flash_html&&(p.setContentHTML(a,a.html()),a.children(".onsale, .flash-sale").remove(),a.prepend(t.sale_flash_html))}),f(document).on("hide_variation",".variations_form",function(a,t){var a=f(a.target).closest(".entry-summary"),e=a.children(".entry-price-wrap").children(".price"),a=a.find(".entry-product-badges");p.resetContentHTML(e),p.resetContentHTML(a)}),f(document).on("change.wc-variation-form",".variations select",function(a){a=f(a.currentTarget);a.closest(".variations_form").find(".variations select").not(a).each(function(){if(2===f(this).children("option").length){var a=f(this).children("option:eq(1)").val();if(f(this).val()!==a)return f(this).val(a).trigger("change"),f(this).siblings(".isw-swatch").find(".isw-term").removeClass("isw-selected").filter('[data-term="'+a+'"]').addClass("isw-selected"),!0}})})}(jQuery);