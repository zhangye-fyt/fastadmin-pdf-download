!function(c){"use strict";c(document).ready(function(){var e,o,t,a,n,i,r;a=c(".my-account-profile"),e=c(".minimog-user-profile__form"),o=c(".avatar",a),t=c(".btn-toggle-avatar-upload-menu",a),a=c(".tm_user_avatar",e),c(".upload_avatar",e).on("click",function(a){a.preventDefault(),c(this).closest(".minimog-user-profile__action").removeClass("active"),c(this).closest(".minimog-user-profile__form").find(".tm_user_avatar").trigger("click")}),a.on("change",function(a){var a=a.target.files,n=new FormData(e.get(0));n.append("action","minimog_upload_avatar"),n.append("_ajax_nonce",$minimogUpload.update_avatar_nonce),c.each(a,function(a,e){n.append("user_avatar",e)}),c.ajax({url:$minimog.ajaxurl,type:"POST",data:n,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a,e,n){var t;a.data&&((t=new Image).src=a.data,t.alt="test",t.onload=function(){o.find("img").remove(),o.append(t)})},beforeSend:function(){t.addClass("updating-icon")},complete:function(){t.removeClass("updating-icon")}})}),e.on("submit",function(a){a.preventDefault()}),a=c(".my-account-profile"),n=c(".minimog-user-profile__form"),i=c(".btn-toggle-avatar-upload-menu",a),r=c(".avatar",a),c(".remove_avatar",n).on("click",function(a){a.preventDefault(),c(this).closest(".minimog-user-profile__action").removeClass("active");a=new FormData(n.get(0));a.append("action","minimog_remove_avatar"),a.append("_ajax_nonce",$minimogUpload.update_avatar_nonce),c.ajax({url:$minimog.ajaxurl,type:"POST",data:a,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a,e,n){var t;a.data&&((t=new Image).src=a.data,t.alt="test",t.onload=function(){r.find("img").remove(),r.append(t)})},beforeSend:function(){i.addClass("updating-icon")},complete:function(){i.removeClass("updating-icon")}})}),c(document.body).on("click",".btn-toggle-avatar-upload-menu",function(a){a.preventDefault(),c(this).closest(".my-avatar").find(".minimog-user-profile").find(".minimog-user-profile__action").toggleClass("active")})})}(jQuery);