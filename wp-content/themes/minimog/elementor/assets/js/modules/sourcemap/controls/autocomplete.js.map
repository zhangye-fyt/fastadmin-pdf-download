{"version":3,"file":"../../../controls/autocomplete.js","sources":["controls/autocomplete.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\t$( window ).on( 'elementor:init', function() {\n\t\t\tvar ControlAutocompleteItemView = elementor.modules.controls.Select2.extend( {\n\t\t\t\tcache: null,\n\t\t\t\tisTitlesReceived: false,\n\n\t\t\t\t/*getSelect2Placeholder: function getSelect2Placeholder() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttext: elementor.translate( 'all' )\n\t\t\t\t\t};\n\t\t\t\t},*/\n\n\t\t\t\tgetQueryData: function getQueryData() {\n\t\t\t\t\t// Use a clone to keep model data unchanged:\n\t\t\t\t\tvar autocomplete = elementorCommon.helpers.cloneObject( this.model.get( 'autocomplete' ) );\n\n\t\t\t\t\tif ( _.isEmpty( autocomplete.query ) ) {\n\t\t\t\t\t\tautocomplete.query = {};\n\t\t\t\t\t} // Specific for Group_Control_Query\n\n\t\t\t\t\tif ( 'cpt_tax' === autocomplete.object ) {\n\t\t\t\t\t\tautocomplete.object = 'tax';\n\n\t\t\t\t\t\tif ( _.isEmpty( autocomplete.query ) || _.isEmpty( autocomplete.query.post_type ) ) {\n\t\t\t\t\t\t\tautocomplete.query.post_type = this.elementSettingsModel.attributes[ 'post_type' ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tautocomplete: autocomplete\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\tgetSelect2DefaultOptions: function getSelect2DefaultOptions() {\n\t\t\t\t\tvar self = this;\n\n\t\t\t\t\treturn jQuery.extend( elementor.modules.controls.Select2.prototype.getSelect2DefaultOptions.apply( this, arguments ), {\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\ttransport: function transport( params, success, failure ) {\n\t\t\t\t\t\t\t\tvar data   = {},\n\t\t\t\t\t\t\t\t    action = 'minimog_elementor_autocomplete_search';\n\n\t\t\t\t\t\t\t\tvar data = self.getQueryData();\n\t\t\t\t\t\t\t\tvar autocomplete = self.model.get( 'autocomplete' );\n\n\t\t\t\t\t\t\t\tdata.q = params.data.q;\n\t\t\t\t\t\t\t\tdata.autocomplete = autocomplete;\n\n\t\t\t\t\t\t\t\treturn elementorCommon.ajax.addRequest( action, {\n\t\t\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\t\t\tsuccess: success,\n\t\t\t\t\t\t\t\t\terror: failure\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata: function data( params ) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcache: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tescapeMarkup: function escapeMarkup( markup ) {\n\t\t\t\t\t\t\treturn markup;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminimumInputLength: 1\n\t\t\t\t\t} );\n\t\t\t\t},\n\n\t\t\t\tgetValueTitles: function getValueTitles() {\n\t\t\t\t\tvar self           = this,\n\t\t\t\t\t    data           = {},\n\t\t\t\t\t    autocomplete   = self.model.get( 'autocomplete' ),\n\t\t\t\t\t    action         = 'minimog_elementor_autocomplete_render',\n\t\t\t\t\t    ids            = this.getControlValue(),\n\t\t\t\t\t    filterTypeName = 'autocomplete',\n\t\t\t\t\t    filterType     = {};\n\n\t\t\t\t\tfilterType = this.model.get( filterTypeName ).object;\n\t\t\t\t\tdata.get_titles = self.getQueryData().autocomplete;\n\t\t\t\t\tdata.unique_id = '' + self.cid + filterType;\n\t\t\t\t\tdata.autocomplete = autocomplete;\n\n\t\t\t\t\tif ( ! ids ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! _.isArray( ids ) ) {\n\t\t\t\t\t\tids = [ ids ];\n\t\t\t\t\t}\n\n\t\t\t\t\telementorCommon.ajax.loadObjects( {\n\t\t\t\t\t\taction: action,\n\t\t\t\t\t\tids: ids,\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tbefore: function before() {\n\t\t\t\t\t\t\tself.addControlSpinner();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function success( ajaxData ) {\n\t\t\t\t\t\t\tself.isTitlesReceived = true;\n\t\t\t\t\t\t\tself.model.set( 'options', ajaxData );\n\t\t\t\t\t\t\tself.render();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t},\n\n\t\t\t\taddControlSpinner: function addControlSpinner() {\n\t\t\t\t\tthis.ui.select.prop( 'disabled', true );\n\t\t\t\t\tthis.$el.find( '.elementor-control-title' ).after( '<span class=\"elementor-control-spinner\">&nbsp;<i class=\"eicon-spinner eicon-animation-spin\"></i>&nbsp;</span>' );\n\t\t\t\t},\n\n\t\t\t\tonReady: function onReady() {\n\t\t\t\t\tif ( ! this.isTitlesReceived ) {\n\t\t\t\t\t\tthis.getValueTitles();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\telementor.addControlView( 'autocomplete', ControlAutocompleteItemView );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["jQuery","window","on","ControlAutocompleteItemView","elementor","modules","controls","Select2","extend","cache","isTitlesReceived","getQueryData","autocomplete","elementorCommon","helpers","cloneObject","this","model","get","_","isEmpty","query","object","post_type","elementSettingsModel","attributes","getSelect2DefaultOptions","self","prototype","apply","arguments","ajax","transport","params","success","failure","data","q","addRequest","error","term","page","escapeMarkup","markup","minimumInputLength","getValueTitles","ids","getControlValue","filterType","get_titles","unique_id","cid","isArray","loadObjects","action","before","addControlSpinner","ajaxData","set","render","ui","select","prop","$el","find","after","onReady","addControlView"],"mappings":"AAAA,CAAA,WAEE,aA2HCA,OAzHEC,MAAO,EAAEC,GAAI,iBAAkB,WACjC,IAAIC,EAA8BC,UAAUC,QAAQC,SAASC,QAAQC,OAAQ,CAC5EC,MAAO,KACPC,iBAAkB,CAAA,EASlBC,aAAc,WAEb,IAAIC,EAAeC,gBAAgBC,QAAQC,YAAaC,KAAKC,MAAMC,IAAK,cAAe,CAAE,EAczF,OAZKC,EAAEC,QAASR,EAAaS,KAAM,IAClCT,EAAaS,MAAQ,IAGjB,YAAcT,EAAaU,SAC/BV,EAAaU,OAAS,OAEjBH,EAAEC,QAASR,EAAaS,KAAM,GAAKF,EAAEC,QAASR,EAAaS,MAAME,SAAU,KAC/EX,EAAaS,MAAME,UAAYP,KAAKQ,qBAAqBC,WAAwB,YAI5E,CACNb,aAAcA,CACf,CACD,EAEAc,yBAA0B,WACzB,IAAIC,EAAOX,KAEX,OAAOhB,OAAOQ,OAAQJ,UAAUC,QAAQC,SAASC,QAAQqB,UAAUF,yBAAyBG,MAAOb,KAAMc,SAAU,EAAG,CACrHC,KAAM,CACLC,UAAW,SAAoBC,EAAQC,EAASC,GAC/C,IAAIC,EAAS,GAGTA,EAAOT,EAAKhB,aAAa,EACzBC,EAAee,EAAKV,MAAMC,IAAK,cAAe,EAKlD,OAHAkB,EAAKC,EAAIJ,EAAOG,KAAKC,EACrBD,EAAKxB,aAAeA,EAEbC,gBAAgBkB,KAAKO,WARf,wCAQmC,CAC/CF,KAAMA,EACNF,QAASA,EACTK,MAAOJ,CACR,CAAE,CACH,EACAC,KAAM,SAAeH,GACpB,MAAO,CACNI,EAAGJ,EAAOO,KACVC,KAAMR,EAAOQ,IACd,CACD,EACAhC,MAAO,CAAA,CACR,EACAiC,aAAc,SAAuBC,GACpC,OAAOA,CACR,EACAC,mBAAoB,CACrB,CAAE,CACH,EAEAC,eAAgB,WACf,IAAIlB,EAAiBX,KACjBoB,EAAiB,GACjBxB,EAAiBe,EAAKV,MAAMC,IAAK,cAAe,EAEhD4B,EAAiB9B,KAAK+B,gBAAgB,EAI1CC,EAAahC,KAAKC,MAAMC,IAHH,cAGuB,EAAEI,OAC9Cc,EAAKa,WAAatB,EAAKhB,aAAa,EAAEC,aACtCwB,EAAKc,UAAY,GAAKvB,EAAKwB,IAAMH,EACjCZ,EAAKxB,aAAeA,EAEbkC,IAIA3B,EAAEiC,QAASN,CAAI,IACrBA,EAAM,CAAEA,IAGTjC,gBAAgBkB,KAAKsB,YAAa,CACjCC,OAnBoB,wCAoBpBR,IAAKA,EACLV,KAAMA,EACNmB,OAAQ,WACP5B,EAAK6B,kBAAkB,CACxB,EACAtB,QAAS,SAAkBuB,GAC1B9B,EAAKjB,iBAAmB,CAAA,EACxBiB,EAAKV,MAAMyC,IAAK,UAAWD,CAAS,EACpC9B,EAAKgC,OAAO,CACb,CACD,CAAE,EACH,EAEAH,kBAAmB,WAClBxC,KAAK4C,GAAGC,OAAOC,KAAM,WAAY,CAAA,CAAK,EACtC9C,KAAK+C,IAAIC,KAAM,0BAA2B,EAAEC,MAAO,+GAAgH,CACpK,EAEAC,QAAS,WACDlD,KAAKN,kBACXM,KAAK6B,eAAe,CAEtB,CACD,CAAE,EAEFzC,UAAU+D,eAAgB,eAAgBhE,CAA4B,CACvE,CAAE,CAEJ,EAAU"}