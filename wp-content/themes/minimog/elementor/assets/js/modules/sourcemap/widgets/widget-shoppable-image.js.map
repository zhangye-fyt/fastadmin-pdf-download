{"version":3,"file":"../../../widgets/widget-shoppable-image.js","sources":["widgets/widget-shoppable-image.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar MinimogShoppableImage = function( $scope, $ ) {\n\t\t\tvar $element = $scope.find( '.minimog-shoppable-image' ),\n\t\t\t\tdataTagType = $element.data( 'tag_type' ),\n\t\t\t\t$wrapper = $( '.mabel-siwc-img-wrapper', $element );\n\n\t\t\tvar dataIcon = $wrapper.data(\"sw-icon\"),\n\t\t\t\tdataTags = $wrapper.data(\"sw-tags\"),\n\t\t\t\tdataText = $wrapper.data(\"sw-text\"),\n\t\t\t\tdataTagSize = $wrapper.data(\"sw-size\");\n\n\t\t\tvar arrowSize = 12;\n\n\t\t\tvar $icon = '<i class=\"'+ dataIcon +'\"></i>';\n\n\t\t\t$( document.body ).on( 'click', function(e) {\n\t\t\t\tif ( ! $( e.target ).is( '.mb-siwc-tag' )\n\t\t\t\t\t&& ! $( e.target ).parents( '.mb-siwc-tag' ).length\n\t\t\t\t\t&& ! $( e.target ).is( '.mb-siwc-popup-inner')\n\t\t\t\t\t&& ! $( e.target ).parents( '.mb-siwc-popup-inner' ).length\n\t\t\t\t) {\n\t\t\t\t\t$( '.mb-siwc-tag', this )\n\t\t\t\t\t\t.removeClass( 'active' )\n\t\t\t\t\t\t.next().addClass( \"mabel-invisible\" );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$.each( dataTags, function ( index, data ) {\n\t\t\t\tif ( 'numeric' === dataTagType ) {\n\t\t\t\t\t$icon = ( index + 1 ).toFixed(0);\n\t\t\t\t}\n\n\t\t\t\tvar img = data.thumb ? '<img src=\"' + data.thumb + '\" alt=\"'+ data.title +'\"/>' : '';\n\n\t\t\t\tvar $productContent = '<div class=\"mb-siwc-popup-inner\">'\n\t\t\t\t\t+ '<div class=\"siwc-thumb-wrapper\"><a target=\"_blank\" href=\"' + data.link + '\">' + img + '</a></div>'\n\t\t\t\t\t+ '<div class=\"siwc-content-wrapper\">'\n\t\t\t\t\t+ '<h3 class=\"product-title\"><a target=\"_blank\" href=\"' + data.link + '\">' + data.title + '</a></h3>'\n\t\t\t\t\t+ '<p class=\"price\">' + data.price + '</p>'\n\t\t\t\t\t+ '<a target=\"_blank\" class=\"product-link\" href=\"' + data.link + '\">' + dataText + '</a>'\n\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ '</div>';\n\n\t\t\t\tvar $popupInner =\n\t\t\t\t\t(\n\t\t\t\t\t\t$( '<span class=\"mb-siwc-tag\">' + $icon + '</span>' )\n\t\t\t\t\t\t.css({ top: data.posY + \"%\", left: data.posX + \"%\" })\n\t\t\t\t\t\t.on( \"click\", function ( event ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t\tvar $currentTag = $(event.currentTarget),\n\t\t\t\t\t\t\t\t$tag = $wrapper.find( \".mb-siwc-tag\" );\n\n\t\t\t\t\t\t\t$currentTag.toggleClass( \"active\" ),\n\t\t\t\t\t\t\t$tag.not( $currentTag ).removeClass( \"active\" ),\n\t\t\t\t\t\t\t$tag.not( $currentTag ).next().addClass( \"mabel-invisible\" ),\n\t\t\t\t\t\t\t$currentTag.next().toggleClass( \"mabel-invisible\" );\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.appendTo( $wrapper ),\n\t\t\t\t\t\t$( $productContent )\n\t\t\t\t\t);\n\n\t\t\t\tvar $popup = $('<div class=\"mb-siwc-popup mabel-invisible\">');\n\n\t\t\t\tdata.thumb || $popup.addClass(\"siwc-no-thumb\"),\n\t\t\t\t\t$popup\n\t\t\t\t\t\t.append( $popupInner )\n\t\t\t\t\t\t.appendTo( $wrapper )\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\ttop: data.posY + \"%\",\n\t\t\t\t\t\t\tleft: data.posX + \"%\",\n\t\t\t\t\t\t\tmarginLeft: -$popup.width() / 2,\n\t\t\t\t\t\t\tmarginTop: dataTagSize / 2 + 7\n\t\t\t\t\t\t});\n\n\t\t\t\t$( window ).on( 'resize', function() {\n\n\t\t\t\t\tvar p = getPopupPosition( data.posX, data.posY, $popup, $wrapper );\n\n\t\t\t\t\tif (\"bottom\" != p)\n\t\t\t\t\t\tswitch (p) {\n\t\t\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop : -1 * ( $popup.height() + dataTagSize / 2 + 7 )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"top left\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop : -1 * ( $popup.height() + dataTagSize / 2 ),\n\t\t\t\t\t\t\t\t\tmarginLeft: -1 * ( $popup.width() + dataTagSize / 2 )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"top right\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop : -1 * ( $popup.height() + dataTagSize / 2 ),\n\t\t\t\t\t\t\t\t\tmarginLeft: dataTagSize / 2\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"bottom left\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop: dataTagSize / 2,\n\t\t\t\t\t\t\t\t\tmarginLeft: -1 * ( $popup.width() + dataTagSize / 2 )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"bottom right\":\n\t\t\t\t\t\t\t\t$popup.css({\n\t\t\t\t\t\t\t\t\tmarginTop: dataTagSize / 2,\n\t\t\t\t\t\t\t\t\tmarginLeft: dataTagSize / 2\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t$popup.addClass( \"mb-siwc-\" + p.replace(\" \", \"-\") );\n\t\t\t\t} ).trigger( 'resize' );\n\t\t\t});\n\n\t\t\tfunction getPopupPosition( posX, posY, $popup, $wrapper ) {\n\t\t\t\tvoid 0 === $wrapper && ( $wrapper = null ), null == $wrapper && ( $wrapper = $( document.body ) );\n\t\t\t\tvar popupH        = $popup.height(),\n\t\t\t\t\tpopupW        = $popup.width(),\n\t\t\t\t\twrapperHeight = $wrapper.height(),\n\t\t\t\t\twrapperWidth  = $wrapper.width(),\n\t\t\t\t\th             = ( popupH / wrapperHeight ) * 100,\n\t\t\t\t\tw             = ( popupW / wrapperWidth ) * 100,\n\t\t\t\t\tx \t\t\t  = wrapperWidth * posX / 100,\n\t\t\t\t\tposition      = posY + h > 100 ? \"top\" : \"bottom\";\n\n\t\t\t\tif ( posX + w > 100 && popupW < x ) {\n\t\t\t\t\tposition += ' left';\n\t\t\t\t} else if ( posX - w < 0 && popupW < wrapperWidth - x ) {\n\t\t\t\t\tposition += ' right';\n\t\t\t\t}\n\n\t\t\t\treturn position;\n\t\t\t}\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-shoppable-image.default', MinimogShoppableImage );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","MinimogShoppableImage","$scope","dataTagType","$element","find","data","$wrapper","dataIcon","dataTags","dataText","dataTagSize","$icon","document","body","on","e","target","is","parents","length","this","removeClass","next","addClass","each","index","toFixed","img","thumb","title","$productContent","link","price","$popupInner","css","top","posY","left","posX","event","preventDefault","$currentTag","currentTarget","$tag","toggleClass","not","appendTo","$popup","append","marginLeft","width","marginTop","window","p","popupH","height","popupW","wrapperHeight","wrapperWidth","w","x","position","replace","trigger","elementorFrontend","hooks","addAction","jQuery"],"mappings":"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"}