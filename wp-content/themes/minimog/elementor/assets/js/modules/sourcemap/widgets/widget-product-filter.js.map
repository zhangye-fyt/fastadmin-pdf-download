{"version":3,"file":"../../../widgets/widget-product-filter.js","sources":["widgets/widget-product-filter.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar MinimogProductFilter = function( $scope, $ ) {\n\t\t\tvar $element = $scope.find( '.tm-product-filter' ),\n\t\t\t\t$form = $( '.tm-product-filter__form', $element );\n\t\t\t\n\t\t\t$element.on( 'click', '.term-link', termToggle );\n\t\t\t$element.on( 'submit', $form, formHandler );\n\t\t\t$element.on( 'click', '.tm-button', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\t$form.trigger( 'submit' );\n\t\t\t} );\n\n\t\t\t// Toggle Term\n\t\t\tfunction termToggle( e ) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar $el = $( this ),\n\t\t\t\t\t$filter = $el.closest( '.tm-product-filter__filter' ),\n\t\t\t\t\tvalue = $el.data( 'term' ),\n\t\t\t\t\t$input = $el.siblings( '.filter-attribute-input' ),\n\t\t\t\t\tcurrent = $input.val(),\n\t\t\t\t\tindex = -1;\n\n\t\t\t\tif ( $filter.hasClass( 'tm-product-filter__multiple' ) ) {\n\t\t\t\t\tcurrent = current ? current.split( ',' ) : [];\n\t\t\t\t\tindex = current.indexOf( value );\n\t\t\t\t\tindex = (-1 !== index) ? index : current.indexOf( value.toString() );\n\n\t\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\t\tcurrent.splice( index, 1 );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrent.push( value );\n\t\t\t\t\t}\n\n\t\t\t\t\t$input.val( current.join( ',' ) );\n\t\t\t\t\t$el.toggleClass( 'selected' );\n\n\t\t\t\t\t$input.prop( 'disabled', current.length <= 0 );\n\n\t\t\t\t\tif ( $filter.hasClass( 'tm-product-filter__attribute' ) ) {\n\t\t\t\t\t\tvar $queryTypeInput = $input.next( 'input[name^=query_type_]' );\n\n\t\t\t\t\t\tif ( $queryTypeInput.length ) {\n\t\t\t\t\t\t\t$queryTypeInput.prop( 'disabled', current.length <= 1 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( $el.hasClass( 'selected' ) ) {\n\t\t\t\t\t\t$el.removeClass( 'selected' );\n\t\t\t\t\t\t$input.val( '' ).prop( 'disabled', true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$el.addClass( 'selected' ).siblings( '.selected' ).removeClass( 'selected' );\n\t\t\t\t\t\t$input.val( value ).prop( 'disabled', false );\n\t\t\t\t\t}\n\t\t\t\t}\t\n\n\t\t\t\t$( document.body ).trigger( 'minimog_products_filter_change' );\n\t\t\t}\n\n\t\t\t// Form Handler\n\t\t\tfunction formHandler( e ) {\n\t\t\t\tvar $inputs = $element.find( 'input[type=hidden]' ),\n\t\t\t\t\taction = $form.attr('action'),\n\t\t\t\t\tseparator = action.indexOf('?') !== -1 ? '&' : '?',\n\t\t\t\t\tparams = {},\n\t\t\t\t\turl = action;\n\n\t\t\t\t$inputs.each( function( e ) {\n\t\t\t\t\tvar name = $( this ).attr( 'name' ),\n\t\t\t\t\t\tvalue = $( this ).val();\n\t\t\t\t\t\n\t\t\t\t\tif ( value ) {\n\t\t\t\t\t\tparams[name] = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// the filter always contains \"filtering\" param\n\t\t\t\t// so it is empty if the length less than 2\n\t\t\t\tif ( Object.keys( params ).length > 1 ) {\n\t\t\t\t\turl += separator + $.param( params, true );\n\t\t\t\t}\n\n\t\t\t\t// Update Url\n\t\t\t\tif ( '?' === url.slice( -1 ) ) {\n\t\t\t\t\turl = url.slice( 0, -1 );\n\t\t\t\t}\n\t\t\n\t\t\t\turl = url.replace( /%2C/g, ',' );\n\t\t\t\t\n\t\t\t\twindow.location.href = url;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-product-filter.default', MinimogProductFilter );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","MinimogProductFilter","$scope","$element","find","$form","on","e","preventDefault","$el","this","$filter","closest","value","data","$input","siblings","current","val","index","hasClass","split","indexOf","toString","splice","push","join","toggleClass","prop","length","$queryTypeInput","next","removeClass","addClass","document","body","trigger","$inputs","action","attr","separator","params","each","name","Object","keys","url","param","slice","replace","window","location","href","elementorFrontend","hooks","addAction","jQuery"],"mappings":"AAAA,CAAA,SACWA,GACT,aAE2B,SAAvBC,EAAiCC,EAAQF,GAC5C,IAAIG,EAAWD,EAAOE,KAAM,oBAAqB,EAChDC,EAAQL,EAAG,2BAA4BG,CAAS,EAEjDA,EAASG,GAAI,QAAS,aAQtB,SAAqBC,GACpBA,EAAEC,eAAe,EAEjB,IAAIC,EAAMT,EAAGU,IAAK,EACjBC,EAAUF,EAAIG,QAAS,4BAA6B,EACpDC,EAAQJ,EAAIK,KAAM,MAAO,EACzBC,EAASN,EAAIO,SAAU,yBAA0B,EACjDC,EAAUF,EAAOG,IAAI,EACrBC,EAAQ,CAAC,EAELR,EAAQS,SAAU,6BAA8B,GACpDH,EAAUA,EAAUA,EAAQI,MAAO,GAAI,EAAI,GAI5B,CAAC,KAFhBF,EAAS,CAAC,KADVA,EAAQF,EAAQK,QAAST,CAAM,GACNM,EAAQF,EAAQK,QAAST,EAAMU,SAAS,CAAE,GAGlEN,EAAQO,OAAQL,EAAO,CAAE,EAEzBF,EAAQQ,KAAMZ,CAAM,EAGrBE,EAAOG,IAAKD,EAAQS,KAAM,GAAI,CAAE,EAChCjB,EAAIkB,YAAa,UAAW,EAE5BZ,EAAOa,KAAM,WAAYX,EAAQY,QAAU,CAAE,EAExClB,EAAQS,SAAU,8BAA+B,IACjDU,EAAkBf,EAAOgB,KAAM,0BAA2B,GAEzCF,QACpBC,EAAgBF,KAAM,WAAYX,EAAQY,QAAU,CAAE,GAInDpB,EAAIW,SAAU,UAAW,GAC7BX,EAAIuB,YAAa,UAAW,EAC5BjB,EAAOG,IAAK,EAAG,EAAEU,KAAM,WAAY,CAAA,CAAK,IAExCnB,EAAIwB,SAAU,UAAW,EAAEjB,SAAU,WAAY,EAAEgB,YAAa,UAAW,EAC3EjB,EAAOG,IAAKL,CAAM,EAAEe,KAAM,WAAY,CAAA,CAAM,GAI9C5B,EAAGkC,SAASC,IAAK,EAAEC,QAAS,gCAAiC,CAC9D,CApD+C,EAC/CjC,EAASG,GAAI,SAAUD,EAsDvB,SAAsBE,GACrB,IAAI8B,EAAUlC,EAASC,KAAM,oBAAqB,EACjDkC,EAASjC,EAAMkC,KAAK,QAAQ,EAC5BC,EAAoC,CAAC,IAAzBF,EAAOhB,QAAQ,GAAG,EAAW,IAAM,IAC/CmB,EAAS,GAGVJ,EAAQK,KAAM,SAAUnC,GACvB,IAAIoC,EAAO3C,EAAGU,IAAK,EAAE6B,KAAM,MAAO,EACjC1B,EAAQb,EAAGU,IAAK,EAAEQ,IAAI,EAElBL,IACJ4B,EAAOE,GAAQ9B,EAEjB,CAAE,EAIkC,EAA/B+B,OAAOC,KAAMJ,CAAO,EAAEZ,SAC1BiB,GAAON,EAAYxC,EAAE+C,MAAON,EAAQ,CAAA,CAAK,GAIrC,MAAQK,EAAIE,MAAO,CAAC,CAAE,IAC1BF,EAAMA,EAAIE,MAAO,EAAG,CAAC,CAAE,GAMxB,OAHAF,EAAMA,EAAIG,QAAS,OAAQ,GAAI,EAE/BC,OAAOC,SAASC,KAAON,EAChB,CAAA,CACR,CArF0C,EAC1C3C,EAASG,GAAI,QAAS,aAAc,SAAUC,GAC7CA,EAAEC,eAAe,EACjBH,EAAM+B,QAAS,QAAS,CACzB,CAAE,CAkFH,CAEApC,EAAGkD,MAAO,EAAE5C,GAAI,0BAA2B,WAC1C+C,kBAAkBC,MAAMC,UAAW,mDAAoDtD,CAAqB,CAC7G,CAAE,CAEJ,EAAGuD,MAAO"}