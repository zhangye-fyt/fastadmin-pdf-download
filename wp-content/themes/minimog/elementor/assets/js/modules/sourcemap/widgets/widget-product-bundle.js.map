{"version":3,"file":"../../../widgets/widget-product-bundle.js","sources":["widgets/widget-product-bundle.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar MinimogProductBundle = function( $scope, $ ) {\n\t\t\tvar $element     = $scope.find( '.tm-product-bundle' ),\n\t\t\t    $products    = $( '.woosb-products', $element ),\n\t\t\t    $buttonPrice = $element.find( '.single_add_to_cart_button .price' );\n\n\t\t\t// Element data.\n\t\t\tvar bundled_price          = $element.data( 'bundled_price' ),\n\t\t\t    bundled_price_from     = $element.data( 'bundled_price_from' ),\n\t\t\t    priceFormat            = $element.data( 'price_format' ),\n\t\t\t    priceDecimals          = $element.data( 'price_decimals' ),\n\t\t\t    priceThousandSeparator = $element.data( 'price_thousand_separator' ),\n\t\t\t    priceDecimalSeparator  = $element.data( 'price_decimal_separator' ),\n\t\t\t    currencySymbol         = $element.data( 'currency_symbol' ),\n\t\t\t    saveText               = $element.data( 'save_text' ),\n\t\t\t    discountAmount         = $element.data( 'discount_amount' );\n\n\t\t\t// Products data.\n\t\t\tvar discount = $products.data( 'discount' );\n\n\t\t\t// Place price next to button text.\n\t\t\t$( document ).on( 'woosb_calc_price', function( e, total_sale, total, total_html, price_suffix ) {\n\t\t\t\tvar discountAmountHtml = '';\n\n\t\t\t\tif ( parseFloat( discountAmount ) > 0 ) {\n\t\t\t\t\tdiscountAmountHtml = '<span class=\"woosb-discount-amount\">(' + '-' + format_price( discountAmount ) + ')</span>';\n\t\t\t\t}\n\n\t\t\t\t$buttonPrice.html( format_price( total_sale ) );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'woosb_check_qty', function( e, qty, $qty ) {\n\t\t\t\tvar $product = $qty.closest( '.woosb-product' );\n\n\t\t\t\tif ( bundled_price === 'subtotal' ) {\n\t\t\t\t\tvar price_suffix = $product.attr( 'data-price-suffix' );\n\t\t\t\t\tvar ori_price = parseFloat( $product.attr( 'data-price' ) ) * parseFloat( qty );\n\n\t\t\t\t\tif ( parseFloat( discount ) > 0 && $products.attr( 'data-fixed-price' ) === 'no' ) {\n\t\t\t\t\t\tvar new_price    = ori_price * (\n\t\t\t\t\t\t\t    100 - parseFloat( discount )\n\t\t\t\t\t\t    ) / 100,\n\t\t\t\t\t\t    amount_saved = ori_price - new_price;\n\n\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t        .html( format_price( new_price ) + price_suffix )\n\t\t\t\t\t\t        .append( format_amount_saved( amount_saved ) )\n\t\t\t\t\t\t        .show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t        .html( format_price( ori_price ) + price_suffix )\n\t\t\t\t\t\t        .show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Change price variation product.\n\t\t\t$( document ).on( 'found_variation', function( e, t ) {\n\t\t\t\tvar $product = $( e['target'] ).closest( '.woosb-product' );\n\n\t\t\t\tif ( t['price_html'] !== undefined && t['price_html'] !== '' &&\n\t\t\t\t\tt[ 'display_price' ] !== undefined && t[ 'display_price' ] !== '' ) {\n\t\t\t\t\tchange_price( $product, t[ 'display_price' ], t[ 'display_regular_price' ], t['price_html'] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tfunction change_price( $product, price, regular_price, price_html ) {\n\t\t\t\tvar price_suffix = $product.attr( 'data-price-suffix' );\n\n\t\t\t\t// hide ori price.\n\t\t\t\t$product.find( '.woosb-price-ori' ).hide();\n\n\t\t\t\t// calculate new price.\n\t\t\t\tif ( bundled_price === 'subtotal' ) {\n\t\t\t\t\tvar ori_price = parseFloat( price ) * parseFloat( $product.attr( 'data-qty' ) );\n\n\t\t\t\t\tif ( bundled_price_from === 'regular_price' && regular_price !== undefined ) {\n\t\t\t\t\t\tori_price = parseFloat( regular_price ) * parseFloat( $product.attr( 'data-qty' ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tvar new_price = ori_price;\n\n\t\t\t\t\tif ( parseFloat( discount ) > 0 ) {\n\t\t\t\t\t\tnew_price = ori_price * (\n\t\t\t\t\t\t\t100 - discount\n\t\t\t\t\t\t) / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t        .html( format_price( new_price ) + price_suffix )\n\t\t\t\t\t        .append( format_amount_saved( ori_price, new_price ) )\n\t\t\t\t\t        .show();\n\t\t\t\t} else {\n\t\t\t\t\tif ( parseFloat( discount ) > 0 ) {\n\t\t\t\t\t\tvar ori_price = parseFloat( price );\n\n\t\t\t\t\t\tif ( bundled_price_from === 'regular_price' && regular_price !== undefined ) {\n\t\t\t\t\t\t\tori_price = parseFloat( regular_price );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar new_price = ori_price * (\n\t\t\t\t\t\t\t100 - parseFloat( discount )\n\t\t\t\t\t\t) / 100;\n\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t        .html( format_price( new_price ) + price_suffix )\n\t\t\t\t\t\t        .append( format_amount_saved( ori_price, new_price ) )\n\t\t\t\t\t\t        .show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( bundled_price_from === 'regular_price' && regular_price !== undefined ) {\n\t\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t\t        .html( format_price( regular_price ) + price_suffix )\n\t\t\t\t\t\t\t        .show();\n\t\t\t\t\t\t} else if ( '' !== price_html ) {\n\t\t\t\t\t\t\t$product.find( '.woosb-price-new' )\n\t\t\t\t\t\t\t        .html( price_html )\n\t\t\t\t\t\t\t        .show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Format Price.\n\t\t\tfunction format_amount_saved( regular_price, sale_price = 0 ) {\n\t\t\t\tvar price = regular_price - sale_price;\n\n\t\t\t\tif ( price <= 0 ) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\treturn '<div class=\"woosb-price-saved\">' + saveText + ' ' + format_price( price ) + '</div>';\n\t\t\t}\n\n\t\t\tfunction format_price( price ) {\n\t\t\t\tvar price_html = '<span class=\"woocommerce-Price-amount amount\">';\n\t\t\t\tvar price_formatted = format_money( price, priceDecimals, '', priceThousandSeparator, priceDecimalSeparator );\n\n\t\t\t\tswitch ( priceFormat ) {\n\t\t\t\t\tcase '%1$s%2$s':\n\t\t\t\t\t\t//left\n\t\t\t\t\t\tprice_html += '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span>' + price_formatted;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '%1$s %2$s':\n\t\t\t\t\t\t//left with space\n\t\t\t\t\t\tprice_html += '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span> ' + price_formatted;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '%2$s%1$s':\n\t\t\t\t\t\t//right\n\t\t\t\t\t\tprice_html += price_formatted +\n\t\t\t\t\t\t              '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span>';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '%2$s %1$s':\n\t\t\t\t\t\t//right with space\n\t\t\t\t\t\tprice_html += price_formatted +\n\t\t\t\t\t\t              ' <span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span>';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t//default\n\t\t\t\t\t\tprice_html += '<span class=\"woocommerce-Price-currencySymbol\">' + currencySymbol + '</span> ' + price_formatted;\n\t\t\t\t}\n\n\t\t\t\tprice_html += '</span>';\n\n\t\t\t\treturn price_html;\n\t\t\t}\n\n\t\t\tfunction format_money( number, places, symbol, thousand, decimal ) {\n\t\t\t\tnumber = number || 0;\n\t\t\t\tplaces = ! isNaN( places = Math.abs( places ) ) ? places : 2;\n\t\t\t\tsymbol = symbol !== undefined ? symbol : '$';\n\t\t\t\tthousand = thousand || ',';\n\t\t\t\tdecimal = decimal || '.';\n\n\t\t\t\tvar negative = number < 0 ? '-' : '',\n\t\t\t\t    i        = parseInt(\n\t\t\t\t\t    number = num_round( Math.abs( + number || 0 ), places ).toFixed( places ),\n\t\t\t\t\t    10 ) + '',\n\t\t\t\t    j        = 0;\n\n\t\t\t\tif ( i.length > 3 ) {\n\t\t\t\t\tj = i.length % 3;\n\t\t\t\t}\n\n\t\t\t\treturn symbol + negative + (\n\t\t\t\t\tj ? i.substr( 0, j ) + thousand : ''\n\t\t\t\t) + i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousand ) + (\n\t\t\t\t\t       places ?\n\t\t\t\t\t   decimal +\n\t\t\t\t\t   num_round( Math.abs( number - i ), places ).toFixed( places ).slice( 2 ) :\n\t\t\t\t\t\t       ''\n\t\t\t\t       );\n\t\t\t}\n\n\t\t\tfunction num_round( value, decimals ) {\n\t\t\t\treturn Number( Math.round( value + 'e' + decimals ) + 'e-' + decimals );\n\t\t\t}\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-product-bundle.default', MinimogProductBundle );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","MinimogProductBundle","$scope","$element","find","$products","$buttonPrice","bundled_price","data","bundled_price_from","priceFormat","priceDecimals","priceThousandSeparator","priceDecimalSeparator","currencySymbol","saveText","discountAmount","discount","format_amount_saved","regular_price","sale_price","price","format_price","price_html","price_formatted","number","places","symbol","thousand","decimal","isNaN","Math","abs","undefined","negative","i","parseInt","num_round","toFixed","j","length","substr","replace","slice","value","decimals","Number","round","document","on","e","total_sale","total","total_html","price_suffix","parseFloat","html","qty","$qty","new_price","amount_saved","$product","closest","attr","ori_price","append","show","t","hide","window","elementorFrontend","hooks","addAction","jQuery"],"mappings":"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"}