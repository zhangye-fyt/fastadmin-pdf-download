{"version":3,"file":"../../widgets/widget-featured-product.js","sources":["widgets/widget-featured-product.js"],"sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar initProductImages = function( $scope, $ ) {\n\t\t\tvar $element = $scope.find( '.minimog-feature-product' ),\n\t\t\t\t$sliderWrap = $element.find( '.woo-single-gallery' );\n\n\t\t\tif ( 0 >= $sliderWrap.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar options = {};\n\t\t\tif ( $sliderWrap.hasClass( 'has-thumbs-slider' ) ) {\n\t\t\t\tvar thumbsSlider = $sliderWrap.find( '.minimog-thumbs-swiper' ).MinimogSwiper();\n\t\t\t\toptions = {\n\t\t\t\t\tthumbs: {\n\t\t\t\t\t\tswiper: thumbsSlider\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar mainSlider = $sliderWrap.children( '.minimog-main-swiper' ).MinimogSwiper( options );\n\n\t\t\tvar $form = $element.find( '.variations_form' );\n\t\t\tvar variations = $form.data( 'product_variations' );\n\n\t\t\t$form.find( 'select' ).on( 'change', function() {\n\t\t\t\tvar isFieldSelected = true;\n\t\t\t\tvar needReset = false;\n\t\t\t\tvar globalAttrs = {};\n\n\t\t\t\tvar formValues = $form.serializeArray();\n\n\t\t\t\t// Check all attributes selected.\n\t\t\t\tfor ( var i = 0; i < formValues.length; i ++ ) {\n\n\t\t\t\t\tvar _name = formValues[ i ].name;\n\n\t\t\t\t\tif ( _name.substring( 0, 10 ) === 'attribute_' ) {\n\n\t\t\t\t\t\tglobalAttrs[ _name ] = formValues[ i ].value;\n\n\t\t\t\t\t\tif ( formValues[ i ].value === '' ) {\n\t\t\t\t\t\t\tisFieldSelected = false;\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( isFieldSelected === true ) {\n\t\t\t\t\t// Convert to array.\n\t\t\t\t\tvar selectedAttributes = Object.entries( globalAttrs );\n\n\t\t\t\t\tvar variationImageID = 0;\n\t\t\t\t\tvar minMatch = 0;\n\n\t\t\t\t\tfor ( var i = variations.length - 1; i >= 0; i -- ) {\n\t\t\t\t\t\tvar currentVariation = variations[ i ];\n\t\t\t\t\t\tvar currentAttributes = Object.entries( currentVariation.attributes ); // Convert to array.\n\t\t\t\t\t\tvar loopMatch = 0;\n\n\t\t\t\t\t\t// Compare selected variation with all variations to find best matches.\n\t\t\t\t\t\tcurrentAttributes.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\t\tselectedAttributes.forEach( ( [ selectedKey, selectedValue ] ) => {\n\n\t\t\t\t\t\t\t\tif ( selectedKey === key ) {\n\t\t\t\t\t\t\t\t\tif ( selectedValue === value\n\t\t\t\t\t\t\t\t\t     || '' === value // Any Terms.\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tloopMatch ++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( minMatch < loopMatch ) {\n\t\t\t\t\t\t\tminMatch = loopMatch;\n\t\t\t\t\t\t\tvariationImageID = currentVariation.image_id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( variationImageID ) {\n\t\t\t\t\t\tmainSlider.$wrapperEl.find( '.swiper-slide' ).each( function( index ) {\n\t\t\t\t\t\t\tvar slideImageID = $( this ).attr( 'data-image-id' );\n\t\t\t\t\t\t\tslideImageID = parseInt( slideImageID );\n\n\t\t\t\t\t\t\tif ( slideImageID === variationImageID ) {\n\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tneedReset = true;\n\t\t\t\t}\n\n\t\t\t\t// Reset to main image.\n\t\t\t\tif ( needReset ) {\n\t\t\t\t\tvar $mainImage = mainSlider.$wrapperEl.find( '.product-main-image' );\n\t\t\t\t\tvar index = $mainImage.index();\n\t\t\t\t\tmainSlider.slideTo( index );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\t$( window ).on( 'elementor/frontend/init', function() {\n\t\t\telementorFrontend.hooks.addAction( 'frontend/element_ready/tm-feature-product.default', initProductImages );\n\t\t} );\n\t}\n)( jQuery );\n"],"names":["$","initProductImages","$scope","options","mainSlider","$form","variations","$sliderWrap","$element","find","length","hasClass","thumbs","swiper","MinimogSwiper","children","data","on","isFieldSelected","needReset","globalAttrs","formValues","serializeArray","i","_name","name","substring","value","selectedAttributes","Object","entries","variationImageID","minMatch","currentVariation","currentAttributes","attributes","loopMatch","forEach","key","selectedKey","selectedValue","image_id","$wrapperEl","each","index","slideImageID","this","attr","parseInt","slideTo","window","elementorFrontend","hooks","addAction","jQuery"],"mappings":"AAAA,CAAA,SACWA,GACT,aAEwB,SAApBC,EAA8BC,EAAQF,GACzC,IAUCG,EAOGC,EAEAC,EACAC,EAnBHC,GAAcC,EADAN,EAAOO,KAAM,0BAA2B,GAC/BA,KAAM,qBAAsB,EAE1CF,EAAYG,QAAjB,IAIDP,EAAU,GACTI,EAAYI,SAAU,mBAAoB,IAE9CR,EAAU,CACTS,OAAQ,CACPC,OAHiBN,EAAYE,KAAM,wBAAyB,EAAEK,cAAc,CAI7E,CACD,GAGGV,EAAaG,EAAYQ,SAAU,sBAAuB,EAAED,cAAeX,CAAQ,EAEnFE,EAAQG,EAASC,KAAM,kBAAmB,EAC1CH,EAAaD,EAAMW,KAAM,oBAAqB,EAElDX,EAAMI,KAAM,QAAS,EAAEQ,GAAI,SAAU,WAQpC,IAPA,IAAIC,EAAkB,CAAA,EAClBC,EAAY,CAAA,EACZC,EAAc,GAEdC,EAAahB,EAAMiB,eAAe,EAG5BC,EAAI,EAAGA,EAAIF,EAAWX,OAAQa,CAAE,GAAK,CAE9C,IAAIC,EAAQH,EAAYE,GAAIE,KAE5B,GAAkC,eAA7BD,EAAME,UAAW,EAAG,EAAG,IAE3BN,EAAaI,GAAUH,EAAYE,GAAII,MAER,KAA1BN,EAAYE,GAAII,OAAe,CACnCT,EAAkB,CAAA,EAElB,KACD,CAEF,CAEA,GAAyB,CAAA,IAApBA,EAA2B,CAO/B,IALA,IAAIU,EAAqBC,OAAOC,QAASV,CAAY,EAEjDW,EAAmB,EACnBC,EAAW,EAELT,EAAIjB,EAAWI,OAAS,EAAQ,GAALa,EAAQA,CAAE,GAAK,CACnD,IAAIU,EAAmB3B,EAAYiB,GAC/BW,EAAoBL,OAAOC,QAASG,EAAiBE,UAAW,EAChEC,EAAY,EAGhBF,EAAkBG,QAAS,CAAA,CAAIC,EAAKX,MACnCC,EAAmBS,QAAS,CAAA,CAAIE,EAAaC,MAEvCD,IAAgBD,GACfE,IAAkBb,GACf,KAAOA,GAEdS,CAAU,EAGb,CAAE,CACH,CAAE,EAEGJ,EAAWI,IACfJ,EAAWI,EACXL,EAAmBE,EAAiBQ,SAEtC,CAEKV,EACJ3B,EAAWsC,WAAWjC,KAAM,eAAgB,EAAEkC,KAAM,SAAUC,GAC7D,IAAIC,EAAe7C,EAAG8C,IAAK,EAAEC,KAAM,eAAgB,EAGnD,GAFeC,SAAUH,CAAa,IAEhBd,EAGrB,OAFA3B,EAAW6C,QAASL,CAAM,EAEnB,CAAA,CAET,CAAE,EAEFzB,EAAY,CAAA,CAEd,MACCA,EAAY,CAAA,EAIRA,IAEAyB,EADaxC,EAAWsC,WAAWjC,KAAM,qBAAsB,EAC5CmC,MAAM,EAC7BxC,EAAW6C,QAASL,CAAM,EAE5B,CAAE,EACH,CAEA5C,EAAGkD,MAAO,EAAEjC,GAAI,0BAA2B,WAC1CkC,kBAAkBC,MAAMC,UAAW,oDAAqDpD,CAAkB,CAC3G,CAAE,CAEJ,EAAGqD,MAAO"}